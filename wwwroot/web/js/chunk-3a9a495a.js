(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a9a495a"],{"39c8":function(t,e,a){"use strict";var i=a("4b35"),o=a.n(i);o.a},4081:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"basic_main"},[a("div",{staticClass:"basic_main_head"},[a("p",[a("el-input",{staticClass:"basic_ipt_search",attrs:{type:"text",placeholder:"搜索"},on:{input:t.searchThisTableData},model:{value:t.basic_search,callback:function(e){t.basic_search="string"===typeof e?e.trim():e},expression:"basic_search"}})],1),a("el-button",{staticClass:"basic_ipt_add",attrs:{type:"primary"},on:{click:t.addTableTr}},[t._v("新增设备")])],1),a("div",{staticClass:"basic_table table_unExpand"},[a("el-table",{attrs:{data:t.table_data}},[a("el-table-column",{attrs:{label:"设备名称",prop:"Name",width:"240"}}),a("el-table-column",{attrs:{label:"简码",prop:"ShortCode",width:"210"}}),a("el-table-column",{attrs:{label:"设备条码",prop:"BarCode",width:"210"}}),a("el-table-column",{attrs:{label:"总锅次",prop:"TotalBatch",width:"210"}}),a("el-table-column",{attrs:{label:"使用状态",prop:"IsActive",width:"210"}}),a("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"change_this_tr",on:{click:function(a){return a.stopPropagation(),t.editThisTr(e.$index)}}},[t._v("编辑")]),a("a",{staticClass:"delete_this_tr",on:{click:function(a){return a.stopPropagation(),t.deleteThisTr(e.$index)}}},[t._v("删除")])]}}])}),a("el-table-column")],1)],1),a("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[t.showEditBox?a("DeviceBox",{attrs:{data:t.toChildData},on:{"to-father":t.child2father}}):t._e()],1)],1)},o=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"deviceBox_editBox",attrs:{id:"editBox"}},[a("div",{staticClass:"editContainer"},[a("div",{staticClass:"editContent"},[a("ul",{staticClass:"clear_float"},[a("li",[a("p",[t._v("设备名称")]),a("el-input",{attrs:{type:"text",placeholder:"设备名称(必填)",maxlength:"10"},model:{value:t.editBoxData.Name,callback:function(e){t.$set(t.editBoxData,"Name","string"===typeof e?e.trim():e)},expression:"editBoxData.Name"}})],1),a("li",[a("p",[t._v("设备简码")]),a("el-input",{attrs:{type:"text",disabled:!0},model:{value:t.editBoxData.ShortCode,callback:function(e){t.$set(t.editBoxData,"ShortCode",e)},expression:"editBoxData.ShortCode"}})],1),a("li",[a("p",[t._v("设备条码")]),a("el-input",{attrs:{type:"text",disabled:!0},model:{value:t.editBoxData.BarCode,callback:function(e){t.$set(t.editBoxData,"BarCode",e)},expression:"editBoxData.BarCode"}})],1),a("li",[a("p",[t._v("生产日期")]),a("el-date-picker",{attrs:{editable:!1,clearable:!1,type:"date",placeholder:"选择日期",format:"yyyy.MM.dd","value-format":"yyyy-MM-dd"},model:{value:t.editBoxData.ProduceDate,callback:function(e){t.$set(t.editBoxData,"ProduceDate",e)},expression:"editBoxData.ProduceDate"}})],1),a("li",[a("p",[t._v("所属供应室")]),a("el-select",{staticClass:"green24x13",attrs:{placeholder:"请选择"},model:{value:t.editBoxData.OwnCssdId,callback:function(e){t.$set(t.editBoxData,"OwnCssdId",e)},expression:"editBoxData.OwnCssdId"}},t._l(t.opetionCssdList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),a("li",[a("p",[t._v("总锅次")]),a("el-input-number",{attrs:{min:1,max:1e6,controls:!1,label:"总锅次"},on:{change:function(e,a){t.numberChange(e,a,"TotalBatch")}},model:{value:t.editBoxData.TotalBatch,callback:function(e){t.$set(t.editBoxData,"TotalBatch",e)},expression:"editBoxData.TotalBatch"}})],1),a("li",[a("p",[t._v("当日锅次")]),a("el-input-number",{attrs:{min:1,max:100,controls:!1,label:"当日锅次"},on:{change:function(e,a){t.numberChange(e,a,"TodayBatch")}},model:{value:t.editBoxData.TodayBatch,callback:function(e){t.$set(t.editBoxData,"TodayBatch",e)},expression:"editBoxData.TodayBatch"}})],1),a("li",[a("p",[t._v("上次维护日期")]),a("el-date-picker",{attrs:{editable:!1,clearable:!1,type:"date",placeholder:"选择日期",format:"yyyy.MM.dd","value-format":"yyyy-MM-dd"},model:{value:t.editBoxData.LastMaintenanceDate,callback:function(e){t.$set(t.editBoxData,"LastMaintenanceDate",e)},expression:"editBoxData.LastMaintenanceDate"}})],1),a("li",[a("p",[t._v("选择设备型号")]),a("el-cascader",{staticClass:"green24x13",attrs:{"expand-trigger":"hover",options:t.optionList,placeholder:"设备型号(必选)"},on:{change:t.handleChange},model:{value:t.selectedOptions,callback:function(e){t.selectedOptions=e},expression:"selectedOptions"}})],1),a("li",[a("p",[t._v("是否启用")]),a("el-select",{staticClass:"green24x13",attrs:{placeholder:"请选择"},model:{value:t.editBoxData.IsActive,callback:function(e){t.$set(t.editBoxData,"IsActive",e)},expression:"editBoxData.IsActive"}},[a("el-option",{attrs:{label:"是",value:!0}}),a("el-option",{attrs:{label:"否",value:!1}})],1)],1),1===t.editBoxData.Type?a("li",[a("p",[t._v("设备类型")]),a("el-select",{staticClass:"green24x13",model:{value:t.editBoxData.CleanDeviceType,callback:function(e){t.$set(t.editBoxData,"CleanDeviceType",e)},expression:"editBoxData.CleanDeviceType"}},[a("el-option",{attrs:{label:"单腔",value:0}}),a("el-option",{attrs:{label:"长龙",value:1}})],1)],1):t._e()]),a("dl",[t._m(0),t._l(t.editBoxData.DevicePrograms,function(e,i){return a("dd",{key:i},[a("p",[t._v(t._s(e.Name))]),a("p",[t._v(t._s(e.Duration))])])})],2)]),a("div",{staticClass:"editBoxOption"},[a("el-button",{on:{click:t.editBoxCancelSave}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.editBoxSave}},[t._v("完成")])],1)])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dt",[a("p",[t._v("程序名称")]),a("p",[t._v("程序运作时长（分钟）")])])}],c=(a("ac6a"),{props:["data"],data:function(){return{editBoxData:{},optionList:[],selectedOptions:[],opetionCssdList:[],DeviceModelProgramList:[]}},created:function(){var t=this;this.editBoxData=this.$props.data,0==this.editBoxData.Id&&(this.editBoxData.ProduceDate=this.GLOBAL.GetNowDate(),this.editBoxData.LastMaintenanceDate=this.editBoxData.ProduceDate),this.selectedOptions[0]=this.editBoxData.Supplier,this.selectedOptions[1]=this.editBoxData.Manufacturer,this.selectedOptions[2]=this.editBoxData.DeviceModelId,axios("/api/Device/DeviceDetail").then(function(e){200==e.data.Code?(t.opetionCssdList=e.data.Data.CssdComponentVms,t.optionList=e.data.Data.CascadeSelectorComponentVms,t.DeviceModelProgramList=e.data.Data.DictionaryDeviceModelProgram,t.getDeviceProgramsData()):t.showInformation({classify:"message",msg:e.data.Msg})}).catch(function(t){})},methods:{numberChange:function(t,e,a){var i=this;void 0==t&&setTimeout(function(){i.editBoxData[a]=1},0)},editBoxCancelSave:function(){this.$emit("to-father","")},editBoxSave:function(){var t=this,e="";e=0==this.editBoxData.Id?"post":"put",this.GLOBAL.VerificationHandle([{val:this.editBoxData.Name,type:"StringNotEmpty",msg:"设备名称不能为空！"},{val:this.editBoxData.DeviceModelId,type:"NumberNotZero",msg:"您还没哟选择设备型号！请选择设备型号！"}])&&axios({url:"/api/Device",method:e,data:this.editBoxData}).then(function(e){var a;200==e.data.Code?(a="success",t.$emit("to-father",e.data.Data)):a="error",t.showInformation({classify:"message",msg:e.data.Msg,type:a})}).catch(function(t){})},handleChange:function(){this.editBoxData.Supplier=this.selectedOptions[0]+"",this.editBoxData.Manufacturer=this.selectedOptions[1]+"",this.editBoxData.DeviceModelId=this.selectedOptions[2],this.getDeviceProgramsData()},getDeviceProgramsData:function(){var t=this;this.editBoxData.DevicePrograms=[],this.DeviceModelProgramList[this.editBoxData.DeviceModelId].forEach(function(e){t.editBoxData.DevicePrograms.push({Name:e.Name,Duration:e.Duration})})}}}),l=c,d=(a("39c8"),a("2877")),r=Object(d["a"])(l,s,n,!1,null,null,null),u=r.exports,h={data:function(){return{Type:0,basic_search:"",table_data:[],showEditBox:!1,toChildData:{}}},components:{DeviceBox:u},created:function(){},mounted:function(){},watch:{$route:{handler:function(t,e,a){var i=this;this.Type=t.params.Type-0,axios("/api/Device/ByType/".concat(this.Type)).then(function(t){200==t.data.Code?i.table_data=t.data.Data:i.showInformation({classify:"message",msg:t.data.Msg})}).catch(function(t){})},immediate:!0}},methods:{searchThisTableData:function(){this.baseDataSearch("/odata/devices?$filter=type eq ".concat(encodeURI("'"+this.GLOBAL.DeviceDictionary[this.Type]+"'")," and (contains(name,").concat("'"+this.basic_search+"'",") or contains(shortcode,").concat("'"+this.basic_search+"'","))"))},addTableTr:function(){this.toChildData={Id:0,Name:"",ShortCode:"",BarCode:"",OwnCssdId:1,TotalBatch:0,TodayBatch:0,LastMaintenanceDate:"",Manufacturer:"",Supplier:"",DeviceModelId:0,ProduceDate:"",IsActive:!0,DevicePrograms:[],CleanDeviceType:0,Type:this.Type},this.showEditBox=!0},deleteThisTr:function(t){var e=this;this.$confirm("您是否确定删除该项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){axios.delete("/api/Device/".concat(e.Type,"/").concat(e.table_data[t].Id)).then(function(t){var a;200==t.data.Code?(a="success",e.table_data=t.data.Data):a="error",e.showInformation({classify:"message",msg:t.data.Msg,type:a})}).catch(function(t){})}).catch(function(){})},editThisTr:function(t){this.toChildData=JSON.parse(JSON.stringify(this.table_data[t])),this.showEditBox=!0},child2father:function(t){this.showEditBox=!1,t&&(this.table_data=t)}}},p=h,D=Object(d["a"])(p,i,o,!1,null,null,null);e["default"]=D.exports},"4b35":function(t,e,a){},ac6a:function(t,e,a){for(var i=a("cadf"),o=a("0d58"),s=a("2aba"),n=a("7726"),c=a("32e9"),l=a("84f2"),d=a("2b4c"),r=d("iterator"),u=d("toStringTag"),h=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},D=o(p),v=0;v<D.length;v++){var m,x=D[v],f=p[x],B=n[x],b=B&&B.prototype;if(b&&(b[r]||c(b,r,h),b[u]||c(b,u,x),l[x]=h,f))for(m in i)b[m]||s(b,m,i[m],!0)}}}]);