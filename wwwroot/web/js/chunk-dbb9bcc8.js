(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dbb9bcc8"],{1:function(t,e){},"1a10":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"photoView"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"view_menu"},[t.$props.viewMode?t._e():a("h3",[a("p",{on:{click:t.switchToTakePhoto}})]),a("el-tabs",{attrs:{type:"card","tab-position":"left"},on:{"tab-click":t.tabClicked},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.list,function(e,i){return a("el-tab-pane",{key:i,attrs:{name:i+""}},[a("div",{staticClass:"imageListBox",attrs:{slot:"label"},slot:"label"},[a("img",{attrs:{src:e.Path||e.Base64String,alt:""}}),t.$props.viewMode?t._e():a("i",{staticClass:"deleteImg",on:{click:function(e){return e.stopPropagation(),t.deleteImg(i)}}})]),a("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.mode,expression:"mode==0"}],staticClass:"tab_content"},[a("img",{attrs:{src:e.Path||e.Base64String,alt:""}}),t.$props.viewMode?t._e():a("el-input",{attrs:{type:"textarea",placeholder:"备注",resize:"none"},model:{value:e.Remark,callback:function(a){t.$set(e,"Remark","string"===typeof a?a.trim():a)},expression:"item.Remark"}}),t.$props.viewMode?a("p",[t._v(t._s(e.Remark))]):t._e()],1)])],1)}),1)],1),a("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.mode,expression:"mode===1"}],staticClass:"view_content"},[a("img",{attrs:{src:t.image,alt:""}}),a("h5",[a("el-button",{staticClass:"btn120x40",on:{click:t.takePhoto}},[t._v("拍照")])],1)])]),a("i",{staticClass:"closePhotoView",on:{click:t.close}})],1)])},s=[],o={props:["data","viewMode","DeletedPicturesId"],data:function(){return{activeName:"-1",mode:0,image:"",list:[]}},created:function(){this.list=null==this.$props.data?[]:this.$props.data,this.list.length>0&&(this.activeName=0),this.$props.viewMode||this.switchToTakePhoto()},beforeDestroy:function(){CSManager.CloseVideo()},methods:{close:function(){this.$emit("viewPhoto-to-father",this.list)},switchToTakePhoto:function(){this.$props.viewMode||CSManager.OpenVideo(50,"",this),this.mode=1},takePhoto:function(){this.list.push({Id:0,Path:"",Base64String:this.image,Remark:""}),this.mode=0,this.activeName=this.list.length-1+""},deleteImg:function(t){var e=this;this.$confirm("您确定要删除该照片?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){0!=e.list[t].Id&&e.$props.DeletedPicturesId.push(e.list[t].Id),e.list.splice(t,1)}).catch(function(){})},tabClicked:function(){this.mode=0}}},n=o,r=(a("68c0"),a("2877")),c=Object(r["a"])(n,i,s,!1,null,null,null);e["a"]=c.exports},2:function(t,e){},3:function(t,e){},"4f74":function(t,e,a){},"68c0":function(t,e,a){"use strict";var i=a("c38f"),s=a.n(i);s.a},7388:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"basic_main"},[a("div",{staticClass:"basic_main_head"},[a("p",[a("el-input",{staticClass:"basic_ipt_search",attrs:{placeholder:"搜索"},on:{input:t.searchThisTableData},model:{value:t.basic_search,callback:function(e){t.basic_search="string"===typeof e?e.trim():e},expression:"basic_search"}})],1),a("p",[t.GLOBAL.UserInfo.JobAndCompetence.includes("000")?a("a",{attrs:{href:"\\ImportBaseData\\器械汇入.xlsx",download:"器械汇入"}},[t._v("下载模板")]):t._e(),t.GLOBAL.UserInfo.JobAndCompetence.includes("000")?a("el-button",{staticClass:"importData"},[a("input",{attrs:{type:"file",id:"fileUploader",name:"fileUploader",accept:".xls, .xlsx"},on:{change:t.fileChange}})]):t._e(),a("el-button",{staticClass:"basic_ipt_add",attrs:{type:"primary"},on:{click:t.addTableTr}},[t._v("新增器械")])],1)]),a("div",{staticClass:"basic_table table_unExpand"},[a("el-table",{attrs:{data:t.table_data}},[a("el-table-column",{attrs:{label:"器械名称",prop:"Name",width:"240"}}),a("el-table-column",{attrs:{label:"简码",prop:"ShortCode",width:"210"}}),a("el-table-column",{attrs:{label:"规格",prop:"Specification",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(""==e.row.Specification?"-":e.row.Specification)+"\n        ")]}}])}),a("el-table-column",{attrs:{label:"安全库存",prop:"SafeInventory",width:"210"}}),a("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"change_this_tr",on:{click:function(a){return a.stopPropagation(),t.editThisTr(e.$index)}}},[t._v("编辑")]),a("a",{staticClass:"delete_this_tr",on:{click:function(a){return a.stopPropagation(),t.deleteThisTr(e.$index)}}},[t._v("删除")])]}}])}),a("el-table-column")],1)],1),a("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[t.showEditBox?a("InstrumentBox",{attrs:{data:t.toChildData},on:{"to-father":t.child2father}}):t._e()],1)],1)},s=[],o=(a("ac6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"instrumentBox",attrs:{id:"editBox"}},[a("div",{staticClass:"editContainer"},[a("div",{staticClass:"editContent"},[a("ul",{staticClass:"clear_float"},[a("li",[a("p",[t._v("器械名称")]),a("el-input",{attrs:{type:"text",placeholder:"器械名称(必填)",maxlength:"10"},model:{value:t.editBoxData.Name,callback:function(e){t.$set(t.editBoxData,"Name","string"===typeof e?e.trim():e)},expression:"editBoxData.Name"}})],1),a("li",[a("p",[t._v("器械简码")]),a("el-input",{attrs:{type:"text",disabled:!0},model:{value:t.editBoxData.ShortCode,callback:function(e){t.$set(t.editBoxData,"ShortCode",e)},expression:"editBoxData.ShortCode"}})],1),a("li",[a("p",[t._v("规格")]),a("el-input",{attrs:{type:"text",placeholder:"规格"},model:{value:t.editBoxData.Specification,callback:function(e){t.$set(t.editBoxData,"Specification","string"===typeof e?e.trim():e)},expression:"editBoxData.Specification"}})],1),a("li",[a("p",[t._v("标准名称")]),a("el-input",{attrs:{type:"text",placeholder:"标准名称"},model:{value:t.editBoxData.StandardName,callback:function(e){t.$set(t.editBoxData,"StandardName","string"===typeof e?e.trim():e)},expression:"editBoxData.StandardName"}})],1),a("li",[a("p",[t._v("成本价格")]),a("el-input-number",{attrs:{placeholder:"成本价格",min:1,max:99999999,controls:!1},on:{change:function(e,a){t.numberChange(e,a,"CostPrice")}},model:{value:t.editBoxData.CostPrice,callback:function(e){t.$set(t.editBoxData,"CostPrice",e)},expression:"editBoxData.CostPrice"}})],1),a("li",[a("p",[t._v("清算价格")]),a("el-input-number",{attrs:{placeholder:"清算价格",min:1,max:99999999,controls:!1},on:{change:function(e,a){t.numberChange(e,a,"ClearingPrice")}},model:{value:t.editBoxData.ClearingPrice,callback:function(e){t.$set(t.editBoxData,"ClearingPrice",e)},expression:"editBoxData.ClearingPrice"}})],1),a("li",[a("p",[t._v("发放供应室")]),a("el-select",{staticClass:"green24x13",attrs:{placeholder:"请选择"},model:{value:t.editBoxData.ProvideCssdId,callback:function(e){t.$set(t.editBoxData,"ProvideCssdId",e)},expression:"editBoxData.ProvideCssdId"}},t._l(t.opetionCssdList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),a("li",[a("p",[t._v("安全库存")]),a("el-input-number",{attrs:{type:"text",placeholder:"安全库存",min:1,max:99999999,controls:!1},on:{change:function(e,a){t.numberChange(e,a,"SafeInventory")}},model:{value:t.editBoxData.SafeInventory,callback:function(e){t.$set(t.editBoxData,"SafeInventory",e)},expression:"editBoxData.SafeInventory"}})],1),a("li",{staticClass:"textareaBox"},[a("p",[t._v("备注")]),a("el-input",{attrs:{type:"textarea",maxlength:"20",placeholder:"备注","show-word-limit":""},model:{value:t.editBoxData.Remark,callback:function(e){t.$set(t.editBoxData,"Remark","string"===typeof e?e.trim():e)},expression:"editBoxData.Remark"}})],1)]),a("div",{staticClass:"photoOption"},[a("span",[t._v("已拍照片")]),a("p",[a("s",[t._v(t._s(t.computedPhotoNumber))]),a("a",{on:{click:t.handleShowPhotos}},[t._v("拍照")])])]),a("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[t.isShowPhoto?a("PhotoView",{attrs:{data:t.editBoxData.InstrumentPictures,DeletedPicturesId:t.editBoxData.DeletedPicturesId},on:{"viewPhoto-to-father":t.viewPhotoToFather}}):t._e()],1)],1),a("div",{staticClass:"editBoxOption"},[a("el-button",{on:{click:t.editBoxCancelSave}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.editBoxSave}},[t._v("完成")])],1)])])}),n=[],r=a("1a10"),c={props:["data"],data:function(){return{isShowPhoto:!1,editBoxData:{},selectedCssd:"",opetionCssdList:[]}},components:{PhotoView:r["a"]},methods:{viewPhotoToFather:function(){this.isShowPhoto=!1},handleShowPhotos:function(){this.isShowPhoto=!0},numberChange:function(t,e,a){var i=this;void 0==t&&setTimeout(function(){i.editBoxData[a]=1},0)},editBoxCancelSave:function(){this.$emit("to-father","")},editBoxSave:function(){var t,e=this;t=0==this.editBoxData.Id?"post":"put",this.GLOBAL.VerificationHandle([{val:this.editBoxData.Name,type:"StringNotEmpty",msg:"器械名称不能为空！"}])&&axios({url:"/api/Instrument",method:t,data:this.editBoxData}).then(function(t){var a;200==t.data.Code?(a="success",e.$emit("to-father",t.data.Data)):a="error",e.showInformation({classify:"message",msg:t.data.Msg,type:a})}).catch(function(t){})}},computed:{computedPhotoNumber:function(){return null==this.editBoxData.InstrumentPictures?0:this.editBoxData.InstrumentPictures.length}},created:function(){var t=this;this.editBoxData=this.$props.data,axios({url:"/api/Instrument/InstrumentDetail/".concat(this.editBoxData.Id)}).then(function(e){200==e.data.Code?(t.opetionCssdList=e.data.Data.Cssd,0===t.editBoxData.ProvideCssdId&&t.opetionCssdList.length>0&&(t.editBoxData.ProvideCssdId=t.opetionCssdList[0].value),t.editBoxData.InstrumentPictures=e.data.Data.InstrumentPictures):t.showInformation({classify:"message",msg:e.data.Msg})}).catch(function(t){})}},l=c,d=(a("9022"),a("2877")),u=Object(d["a"])(l,o,n,!1,null,null,null),h=u.exports,p=a("1146"),m=a.n(p),f={data:function(){return{basic_search:"",table_data:[],showEditBox:!1,toChildData:{}}},components:{InstrumentBox:h},created:function(){var t=this;axios({url:"/odata/instruments"}).then(function(e){t.table_data=e.data.value}).catch(function(t){})},mounted:function(){},methods:{fileChange:function(t){var e=this,a={},i=t.target.files[0],s=new FileReader;s.onload=function(t){var i=t.target.result,s=m.a.read(i,{type:"binary"});s.SheetNames.forEach(function(t){a[t]=m.a.utils.sheet_to_row_object_array(s.Sheets[t]).splice(1)}),e.requestData(a.Sheet1,0)},s.onerror=function(t){this.showInformation({classify:"message",msg:"文件不能被读取！Code ".concat(t.target.error.code)})},s.readAsBinaryString(i)},requestData:function(t,e){var a=this;axios({url:"/api/Instrument",method:"POST",data:t[e]}).then(function(i){200==i.data.Code?(a.table_data=i.data.Data,e<t.length-1&&a.requestData(t,e+1)):a.showInformation({classify:"message",msg:i.data.Msg})}).catch(function(t){})},addTableTr:function(){this.toChildData={Id:0,Name:"",OwnClinicId:0,StandardName:"",ShortCode:"",CostPrice:1,ClearingPrice:1,SafeInventory:1,Specification:"",Remark:"",ProvideCssdId:0,InstrumentPictures:[]},this.showEditBox=!0},deleteThisTr:function(t){var e=this;this.$confirm("您是否确定删除该项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){axios.delete("/api/Instrument/".concat(e.table_data[t].Id),{headers:{}}).then(function(t){var a;200==t.data.Code?(a="success",e.table_data=t.data.Data):a="error",e.showInformation({classify:"message",msg:t.data.Msg,type:a})}).catch(function(t){})}).catch(function(){})},editThisTr:function(t){this.toChildData=JSON.parse(JSON.stringify(this.table_data[t])),this.showEditBox=!0},searchThisTableData:function(){this.baseDataSearch("/odata/instruments?$filter=contains(name,".concat("'"+this.basic_search+"'",") or contains(shortcode,").concat("'"+this.basic_search+"'",")"))},child2father:function(t){this.showEditBox=!1,t&&(this.table_data=t)}}},v=f,x=Object(d["a"])(v,i,s,!1,null,null,null);e["default"]=x.exports},9022:function(t,e,a){"use strict";var i=a("4f74"),s=a.n(i);s.a},c38f:function(t,e,a){}}]);