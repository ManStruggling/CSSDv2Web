(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e810214"],{1:function(t,a){},2:function(t,a){},3:function(t,a){},"529c":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"basic_main"},[e("div",{staticClass:"basic_main_head"},[e("p",[e("el-input",{staticClass:"basic_ipt_search",attrs:{placeholder:"搜索"},on:{input:t.searchThisTableData},model:{value:t.basic_search,callback:function(a){t.basic_search="string"===typeof a?a.trim():a},expression:"basic_search"}})],1),e("p",[t.GLOBAL.UserInfo.JobAndCompetence.includes("000")?e("a",{attrs:{href:"\\ImportBaseData\\包原料汇入.xlsx",download:"包原料汇入"}},[t._v("下载模板")]):t._e(),t.GLOBAL.UserInfo.JobAndCompetence.includes("000")?e("el-button",{staticClass:"importData"},[e("input",{attrs:{type:"file",id:"fileUploader",name:"fileUploader",accept:".xls, .xlsx"},on:{change:t.fileChange}})]):t._e(),e("el-button",{staticClass:"basic_ipt_add",attrs:{type:"primary"},on:{click:t.addTableTr}},[t._v("新增原料")])],1)]),e("div",{staticClass:"basic_table table_unExpand"},[e("el-table",{attrs:{data:t.table_data}},[e("el-table-column",{attrs:{label:"原料名称",prop:"Name",width:"240"}}),e("el-table-column",{attrs:{label:"规格",prop:"Specification",width:"210"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n          "+t._s(""==a.row.Specification?"-":a.row.Specification)+"\n        ")]}}])}),e("el-table-column",{attrs:{label:"安全库存",prop:"SafeInventory",width:"210"}}),e("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("a",{staticClass:"change_this_tr",on:{click:function(e){return e.stopPropagation(),t.editThisTr(a.$index)}}},[t._v("编辑")]),e("a",{staticClass:"delete_this_tr",on:{click:function(e){return e.stopPropagation(),t.deleteThisTr(a.$index)}}},[t._v("删除")])]}}])}),e("el-table-column")],1)],1),e("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[t.showEditBox?e("MaterialBox",{attrs:{data:t.toChildData},on:{"to-father":t.child2father}}):t._e()],1)],1)},n=[],o=(e("ac6a"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"editBox"}},[e("div",{staticClass:"editContainer"},[e("div",{staticClass:"editContent"},[e("ul",{staticClass:"clear_float"},[e("li",[e("p",[t._v("原料名称")]),e("el-input",{attrs:{type:"text",placeholder:"原料名称(必填)",maxlength:"10"},model:{value:t.editBoxData.Name,callback:function(a){t.$set(t.editBoxData,"Name","string"===typeof a?a.trim():a)},expression:"editBoxData.Name"}})],1),e("li",[e("p",[t._v("原料简码")]),e("el-input",{attrs:{type:"text",disabled:!0},model:{value:t.editBoxData.ShortCode,callback:function(a){t.$set(t.editBoxData,"ShortCode",a)},expression:"editBoxData.ShortCode"}})],1),e("li",[e("p",[t._v("规格")]),e("el-input",{attrs:{type:"text",placeholder:"规格"},model:{value:t.editBoxData.Specification,callback:function(a){t.$set(t.editBoxData,"Specification","string"===typeof a?a.trim():a)},expression:"editBoxData.Specification"}})],1),e("li",[e("p",[t._v("成本价格")]),e("el-input-number",{attrs:{placeholder:"成本价格",min:1,max:99999999,controls:!1},on:{change:function(a,e){t.numberChange(a,e,"CostPrice")}},model:{value:t.editBoxData.CostPrice,callback:function(a){t.$set(t.editBoxData,"CostPrice",a)},expression:"editBoxData.CostPrice"}})],1),e("li",[e("p",[t._v("清算价格")]),e("el-input-number",{attrs:{placeholder:"清算价格",min:1,max:99999999,controls:!1},on:{change:function(a,e){t.numberChange(a,e,"ClearingPrice")}},model:{value:t.editBoxData.ClearingPrice,callback:function(a){t.$set(t.editBoxData,"ClearingPrice",a)},expression:"editBoxData.ClearingPrice"}})],1),e("li",[e("p",[t._v("安全库存")]),e("el-input-number",{attrs:{placeholder:"安全库存",min:1,controls:!1},on:{change:function(a,e){t.numberChange(a,e,"SafeInventory")}},model:{value:t.editBoxData.SafeInventory,callback:function(a){t.$set(t.editBoxData,"SafeInventory",a)},expression:"editBoxData.SafeInventory"}})],1)])]),e("div",{staticClass:"editBoxOption"},[e("el-button",{on:{click:t.editBoxCancelSave}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.editBoxSave}},[t._v("完成")])],1)])])}),s=[],c={props:["data"],data:function(){return{editBoxData:{}}},created:function(){this.editBoxData=this.$props.data},methods:{numberChange:function(t,a,e){var i=this;void 0==t&&setTimeout(function(){i.editBoxData[e]=1},0)},editBoxCancelSave:function(){this.$emit("to-father","")},editBoxSave:function(){var t=this,a="";a=0==this.editBoxData.Id?"post":"put",this.GLOBAL.VerificationHandle([{val:this.editBoxData.Name,type:"StringNotEmpty",msg:"原料名称不能为空！"}])&&axios({url:"/api/ProductMaterial",method:a,data:this.editBoxData}).then(function(a){var e;200==a.data.Code?(e="success",t.$emit("to-father",a.data.Data)):e="error",t.showInformation({classify:"message",msg:a.data.Msg,type:e})}).catch(function(t){})}}},r=c,l=e("2877"),d=Object(l["a"])(r,o,s,!1,null,null,null),u=d.exports,h=e("1146"),f=e.n(h),p={data:function(){return{basic_search:"",table_data:[],showEditBox:!1,toChildData:{}}},components:{MaterialBox:u},created:function(){var t=this;axios({url:"/odata/ProductMaterials"}).then(function(a){t.table_data=a.data.value}).catch(function(t){})},mounted:function(){},methods:{fileChange:function(t){var a=this,e={},i=t.target.files[0],n=new FileReader;n.onload=function(t){var i=t.target.result,n=f.a.read(i,{type:"binary"});n.SheetNames.forEach(function(t){e[t]=f.a.utils.sheet_to_row_object_array(n.Sheets[t]).splice(1)}),a.requestData(e.Sheet1,0)},n.onerror=function(t){this.showInformation({classify:"message",msg:"文件不能被读取！Code ".concat(t.target.error.code)})},n.readAsBinaryString(i)},requestData:function(t,a){var e=this;axios({url:"/api/ProductMaterial",method:"POST",data:t[a]}).then(function(i){200==i.data.Code?(e.table_data=i.data.Data,a<t.length-1&&e.requestData(t,a+1)):e.showInformation({classify:"message",msg:i.data.Msg})}).catch(function(t){})},searchThisTableData:function(){this.baseDataSearch("/odata/ProductMaterials?$filter=contains(name,".concat("'"+this.basic_search+"'",") or contains(shortcode,").concat("'"+this.basic_search+"'",")"))},addTableTr:function(){this.toChildData={Id:0,Name:"",ShortCode:"",CostPrice:1,ClearingPrice:1,SafeInventory:1,Specification:""},this.showEditBox=!0},deleteThisTr:function(t){var a=this;this.$confirm("您是否确定删除该项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){axios.delete("/api/ProductMaterial/".concat(a.table_data[t].Id),{headers:{}}).then(function(t){var e;200==t.data.Code?(e="success",a.table_data=t.data.Data):e="error",a.showInformation({classify:"message",msg:t.data.Msg,type:e})}).catch(function(t){})}).catch(function(){})},editThisTr:function(t){this.toChildData=JSON.parse(JSON.stringify(this.table_data[t])),this.showEditBox=!0},child2father:function(t){this.showEditBox=!1,t&&(this.table_data=t)}}},m=p,x=Object(l["a"])(m,i,n,!1,null,null,null);a["default"]=x.exports}}]);