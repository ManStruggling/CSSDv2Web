(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-536ca644"],{"04a0":function(e,t,s){},"37ae":function(e,t,s){"use strict";var a=s("04a0"),o=s.n(a);o.a},"8f19":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cssd_box",attrs:{id:"reserveProductRecord"}},[s("div",{staticClass:"cssd_title"},[s("ul",{staticClass:"cssd_menu"},[s("router-link",{attrs:{to:"/apply/reserve",tag:"li"}},[s("p",[e._v("返回")])])],1),s("div",{staticClass:"cssd_title_right"},[s("p",{staticClass:"search_date"},[s("el-date-picker",{attrs:{type:"daterange",align:"right",clearable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.GLOBAL.pickerOptions,"value-format":"yyyy-MM-dd"},model:{value:e.search_date,callback:function(t){e.search_date=t},expression:"search_date"}})],1),s("p",[s("el-button",{attrs:{type:"primary"},on:{click:e.searchRecordsData}},[e._v("查询")])],1)])]),s("div",{staticClass:"cssd_table_center cssd_record_ui"},[e._m(0),s("el-collapse",{attrs:{accordion:""},on:{change:e.collapseChange}},e._l(e.recordList,function(t,a){return s("el-collapse-item",{key:a,attrs:{name:a+""}},[s("div",{staticClass:"collapseTh",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"collapseTd"},[s("p",[e._v(e._s(t.CreatedDate))])]),s("div",{staticClass:"collapseTd"},[s("p",[e._v(e._s(t.BarCode))])]),s("div",{staticClass:"collapseTd"},[s("p",[e._v(e._s(t.BookDate))])]),s("div",{staticClass:"collapseTd"},[s("p",[e._v(e._s(t.BookCssd))])]),s("div",{staticClass:"collapseTd"},[s("p",[e._v(e._s(t.BookSubClinic))])]),s("div",{staticClass:"collapseTd"},[s("p",[e._v(e._s(t.Operator))])]),s("div",{staticClass:"collapseTd"},[s("el-popover",{attrs:{placement:"top-start",title:"备注",width:"200",trigger:"hover",content:t.Remark}},[s("p",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.Remark))])])],1),s("div",{staticClass:"collapseTd"},[s("p",[s("el-button",{attrs:{size:"mini",disabled:!((e.GLOBAL.UserInfo.JobAndCompetence.includes("271")||e.GLOBAL.UserInfo.JobAndCompetence.includes("000")||e.GLOBAL.UserInfo.JobAndCompetence.includes("200"))&&!t.CanNotBeModified)},on:{click:function(t){return t.stopPropagation(),e.changeRecord(a)}}},[e._v("修改")]),s("el-button",{attrs:{size:"mini",disabled:!((e.GLOBAL.UserInfo.JobAndCompetence.includes("271")||e.GLOBAL.UserInfo.JobAndCompetence.includes("000")||e.GLOBAL.UserInfo.JobAndCompetence.includes("200"))&&!t.CanNotBeModified)},on:{click:function(t){return t.stopPropagation(),e.cancelReserve(a)}}},[e._v(e._s(t.IsCanceled?"已取消":"取消"))])],1)])]),s("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[""!=t.Products?s("el-tab-pane",{attrs:{label:"无菌物品"}},[s("div",{staticClass:"table_detail"},[s("div",{staticClass:"myTableTitle"},[s("p",[e._v("名称")]),s("p",[e._v("数量")])]),s("ul",e._l(t.Products,function(t,a){return s("li",{key:a},[s("p",[e._v(e._s(t.ProductName))]),s("p",[e._v(e._s(t.ProductQuantity))])])}),0)])]):e._e(),""!=t.DisposableItems?s("el-tab-pane",{attrs:{label:"一次性物品"}},[s("div",{staticClass:"table_detail"},[s("div",{staticClass:"myTableTitle"},[s("p",[e._v("名称")]),s("p",[e._v("规格")]),s("p",[e._v("数量")])]),s("ul",e._l(t.DisposableItems,function(t,a){return s("li",{key:a},[s("p",[e._v(e._s(t.ProductName))]),s("p",[e._v(e._s(t.Specification))]),s("p",[e._v(e._s(t.ProductQuantity))])])}),0)])]):e._e()],1)],1)}),1),s("div",{directives:[{name:"show",rawName:"v-show",value:""==e.recordList,expression:"recordList==''"}],staticClass:"recordNoData"},[e._v("暂无数据")])],1)])},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content_title"},[s("p",[e._v("预定日期")]),s("p",[e._v("预定编号")]),s("p",[e._v("需用日期")]),s("p",[e._v("预定供应室")]),s("p",[e._v("预定子科室")]),s("p",[e._v("操作人")]),s("p",[e._v("备注")]),s("p",[e._v("操作")])])}],c={data:function(){return{activeName:"0",search_date:[],endDateLimit:{},recordList:[]}},created:function(){var e=this.GLOBAL.GetNowDate();this.search_date=[e,e],this.searchRecordsData()},mounted:function(){this.GLOBAL.initWebSorcket(this)},methods:{collapseChange:function(e){var t=this;""!=e&&null==this.recordList[e].Products&&null==this.recordList[e].DisposableItems&&axios({url:"/api/Book/BookRecord/Detail/".concat(this.recordList[e].Id)}).then(function(s){200==s.data.Code?(t.recordList[e].Products=s.data.Data.Products,t.recordList[e].DisposableItems=s.data.Data.DisposableItems):t.showInformation({classify:"message",msg:s.data.Msg})})},cancelReserve:function(e){var t=this;axios({url:"/api/Book/".concat(this.recordList[e].Id),method:"DELETE"}).then(function(s){var a;200==s.data.Code?(a="success",t.websocket.send(JSON.stringify({CssdId:t.recordList[e].BookCssdId,ReserveCheckState:!0,PackageState:!1,ProvideState:!1})),t.$router.go(0)):a="error",t.showInformation({classify:"message",msg:s.data.Msg,type:a})}).catch(function(e){})},changeRecord:function(e){this.$router.push({path:"/apply/reserve",query:{recordId:this.recordList[e].Id}})},searchRecordsData:function(){var e=this;axios({url:"/api/Book/BookRecord/".concat(this.search_date[0],"/").concat(this.search_date[1])}).then(function(t){var s;200==t.data.Code?(s="success",e.recordList=t.data.Data):s="error",e.showInformation({classify:"message",msg:t.data.Msg,type:s})}).catch(function(e){})}}},i=c,r=(s("37ae"),s("2877")),n=Object(r["a"])(i,a,o,!1,null,null,null);t["default"]=n.exports}}]);