(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fbc27544"],{"1a10":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"photoView"}},[e("div",{staticClass:"container"},[e("div",{staticClass:"view_menu"},[t.$props.viewMode?t._e():e("h3",[e("p",{on:{click:t.switchToTakePhoto}})]),e("el-tabs",{attrs:{type:"card","tab-position":"left"},on:{"tab-click":t.tabClicked},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},t._l(t.list,function(a,s){return e("el-tab-pane",{key:s,attrs:{name:s+""}},[e("div",{staticClass:"imageListBox",attrs:{slot:"label"},slot:"label"},[e("img",{attrs:{src:a.Path||a.Base64String,alt:""}}),t.$props.viewMode?t._e():e("i",{staticClass:"deleteImg",on:{click:function(a){return a.stopPropagation(),t.deleteImg(s)}}})]),e("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:0==t.mode,expression:"mode==0"}],staticClass:"tab_content"},[e("img",{attrs:{src:a.Path||a.Base64String,alt:""}}),t.$props.viewMode?t._e():e("el-input",{attrs:{type:"textarea",placeholder:"备注",resize:"none"},model:{value:a.Remark,callback:function(e){t.$set(a,"Remark","string"===typeof e?e.trim():e)},expression:"item.Remark"}}),t.$props.viewMode?e("p",[t._v(t._s(a.Remark))]):t._e()],1)])],1)}),1)],1),e("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:1===t.mode,expression:"mode===1"}],staticClass:"view_content"},[e("img",{attrs:{src:t.image,alt:""}}),e("h5",[e("el-button",{staticClass:"btn120x40",on:{click:t.takePhoto}},[t._v("拍照")])],1)])]),e("i",{staticClass:"closePhotoView",on:{click:t.close}})],1)])},i=[],n={props:["data","viewMode","DeletedPicturesId"],data:function(){return{activeName:"-1",mode:0,image:"",list:[]}},created:function(){this.list=null==this.$props.data?[]:this.$props.data,this.list.length>0&&(this.activeName=0),this.$props.viewMode||this.switchToTakePhoto()},beforeDestroy:function(){CSManager.CloseVideo()},methods:{close:function(){this.$emit("viewPhoto-to-father",this.list)},switchToTakePhoto:function(){this.$props.viewMode||CSManager.OpenVideo(50,"",this),this.mode=1},takePhoto:function(){this.list.push({Id:0,Path:"",Base64String:this.image,Remark:""}),this.mode=0,this.activeName=this.list.length-1+""},deleteImg:function(t){var a=this;this.$confirm("您确定要删除该照片?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){0!=a.list[t].Id&&a.$props.DeletedPicturesId.push(a.list[t].Id),a.list.splice(t,1)}).catch(function(){})},tabClicked:function(){this.mode=0}}},r=n,c=(e("68c0"),e("2877")),o=Object(c["a"])(r,s,i,!1,null,null,null);a["a"]=o.exports},"1d68":function(t,a,e){},2911:function(t,a,e){},6643:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cssd_box",attrs:{id:"packageRecord"}},[e("div",{staticClass:"cssd_title"},[e("ul",{staticClass:"cssd_menu"},[e("router-link",{attrs:{to:"/package/taskList",tag:"li"}},[e("p",[t._v("返回")])]),e("li",{on:{click:t.handleReprint}},[e("p",[t._v("重打包条码")])]),e("li",{on:{click:t.handleReprintList}},[e("p",[t._v("重打器械清单")])])],1),e("div",{staticClass:"cssd_title_right"},[e("p",{staticClass:"search_date"},[e("el-date-picker",{attrs:{type:"daterange",align:"right",clearable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.GLOBAL.pickerOptions,"value-format":"yyyy-MM-dd"},model:{value:t.search_date,callback:function(a){t.search_date=a},expression:"search_date"}})],1),e("p",[e("el-button",{attrs:{type:"primary"},on:{click:t.searchRecordsData}},[t._v("查询")])],1)])]),e("div",{staticClass:"cssd_table_center cssd_record_ui table_unExpand"},[t._m(0),e("el-collapse",{attrs:{accordion:""},on:{change:t.collapseChange}},t._l(t.recordList,function(a,s){return e("el-collapse-item",{key:s,class:a.IsNotBarCodeProduct?"collapseUnExpand":"",attrs:{name:s+""}},[e("div",{staticClass:"collapseTh",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"collapseTd"},[e("p",[t._v(t._s(a.PackageTaskReceiveDate))])]),e("div",{staticClass:"collapseTd"},[e("p",[t._v(t._s(a.PackageTaskBarCode))])]),e("div",{staticClass:"collapseTd"},[e("p",[t._v(t._s(a.ProductName))])]),e("div",{staticClass:"collapseTd"},[e("p",[t._v(t._s(a.ProvideSubClinicName))])]),e("div",{staticClass:"collapseTd"},[e("p",[t._v(t._s(a.PackagePersonName))])]),e("div",{staticClass:"collapseTd"},[e("p",[t._v(t._s(a.ReviewerName))])]),e("div",{staticClass:"collapseTd"},[e("p",[t._v(t._s(a.ThisTimePackageQuantity))])]),e("div",{staticClass:"collapseTd"},[e("p",[e("a",{on:{click:function(a){return a.stopPropagation(),t.handleShowPhotos(s)}}},[t._v("查看")])])])]),1!=a.IsNotBarCodeProduct?e("el-table",{attrs:{data:a.PackageInfoForPackageTaskReceives}},[e("el-table-column",{attrs:{label:"包条码",prop:"PackageBarCode",width:"240"}}),t._e(),e("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("a",{staticClass:"track_a",on:{click:function(e){return t.track(s,a.$index,a.row.PackageBarCode)}}},[t._v("追溯")])]}}],null,!0)}),e("el-table-column")],1):t._e()],1)}),1),e("div",{directives:[{name:"show",rawName:"v-show",value:""==t.recordList,expression:"recordList==''"}],staticClass:"recordNoData"},[t._v("暂无数据")])],1),e("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[t.isShowPhoto?e("PhotoView",{attrs:{data:t.photoData,viewMode:!0},on:{"viewPhoto-to-father":t.viewPhotoToFather}}):t._e()],1),e("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[t.isShowReprint?e("Reprint",{on:{"reprint-to-father":t.reprintToFather}}):t._e()],1),e("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[t.isShowReprintList?e("ReprintList",{on:{"reprintList-to-father":t.reprintListToFather}}):t._e()],1)],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content_title"},[e("p",[t._v("配包日期")]),e("p",[t._v("配包编号")]),e("p",[t._v("包名称")]),e("p",[t._v("所属科室")]),e("p",[t._v("配包人")]),e("p",[t._v("审核人")]),e("p",[t._v("配包数")]),e("p",[t._v("照片")])])}],n=e("1a10"),r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"reprint"}},[e("div",{staticClass:"print_box"},[e("div",{staticClass:"search_box"},[e("p",[t._v("包条码")]),e("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{placeholder:"请输入包条码"},model:{value:t.search_str,callback:function(a){t.search_str="string"===typeof a?a.trim():a},expression:"search_str"}}),e("el-button",{on:{click:t.searchBarCode}},[t._v("查询")])],1),e("ul",[e("li",[e("p",[t._v("包条码")]),e("span",[t._v(t._s(t.packageMsg.BarCode))])]),e("li",[e("p",[t._v("包名称")]),e("span",[t._v(t._s(t.packageMsg.ProductName))])]),e("li",[e("p",[t._v("外包装")]),e("span",[t._v(t._s(t.packageMsg.ExternalPackage))])]),e("li",[e("p",[t._v("配包人")]),e("span",[t._v(t._s(t.packageMsg.PackagePerson))])]),e("li",[e("p",[t._v("审核人")]),e("span",[t._v(t._s(t.packageMsg.PackageReviewer))])]),e("li",[e("p",[t._v("所属科室")]),e("span",[t._v(t._s(t.packageMsg.SubClinicName))])]),e("li",[e("p",[t._v("包状态")]),e("span",[t._v(t._s(t.packageMsg.Status))])]),e("li",[e("p",[t._v("灭菌日期")]),e("span",[t._v(t._s(t.packageMsg.SterilizeDate))])]),e("li",[e("p",[t._v("有效日期")]),e("span",[t._v(t._s(t.packageMsg.ValidDate))])])]),e("dl",{directives:[{name:"show",rawName:"v-show",value:t.packageMsg.IsOuterProduct,expression:"packageMsg.IsOuterProduct"}]},[e("dt",[e("p",[t._v("打印第")]),e("el-select",{staticClass:"green18x10",attrs:{multiple:""},model:{value:t.packageMsg.SplitCount,callback:function(a){t.$set(t.packageMsg,"SplitCount",a)},expression:"packageMsg.SplitCount"}},t._l(t.packageMsg.SplitPackageCount,function(t){return e("el-option",{key:t,attrs:{label:t+"",value:t+""}})}),1),e("span",[t._v("张")])],1),e("dd",[e("p",[t._v("分包数")]),e("div",[t._v(t._s(t.packageMsg.SplitPackageCount))])])]),e("div",{staticClass:"print_number"},[e("p",[t._v("打印份数")]),e("el-input-number",{attrs:{controls:!1,min:1,max:999,placeholder:"打印份数"},on:{change:t.inputNumberChange},model:{value:t.packageMsg.PrintCount,callback:function(a){t.$set(t.packageMsg,"PrintCount",a)},expression:"packageMsg.PrintCount"}}),e("span",[t._v("共 "+t._s(t.countPrintNumber)+" 张")])],1),e("div",{staticClass:"option"},[e("el-button",{staticClass:"btn88x32empty",on:{click:t.cancelPrint}},[t._v("取消")]),e("el-button",{staticClass:"btn88x32",attrs:{type:"primary"},on:{click:t.confirmPrint}},[t._v("确定")])],1)])])},c=[],o=(e("ac6a"),{data:function(){return{search_str:"",packageMsg:{PrintCount:0,SplitCount:[],Instruments:[]}}},watch:{"packageMsg.SplitCount":{handler:function(t){console.log(t),t.length>0&&setTimeout(function(){$("#reprint .el-select .el-input__inner").attr({placeholder:t.join()})},0)},immediate:!0,deep:!0}},methods:{inputNumberChange:function(t){var a=this;void 0==t&&setTimeout(function(){a.packageMsg.PrintCount=1},0)},cancelPrint:function(){this.$emit("reprint-to-father")},searchBarCode:function(){var t=this;this.GLOBAL.VerificationHandle([{val:this.search_str,type:"StringNotEmpty",msg:"搜索的条码不能为空！"}])&&axios({url:"/api/Package/RePrintBarCode/".concat(this.search_str)}).then(function(a){200==a.data.Code?(a.data.Data.BarCode=t.search_str,a.data.Data.PrintCount=1,a.data.Data.SplitCount=[],t.packageMsg=a.data.Data):t.showInformation({classify:"message",msg:a.data.Msg})}).catch(function(t){})},confirmPrint:function(){var t=this;this.packageMsg.BarCode?this.packageMsg.IsOuterProduct?this.GLOBAL.VerificationHandle([{val:this.packageMsg.SplitCount,type:"ArrayNotEmpty",msg:"至少选择打印一张"}])&&axios({url:"/api/Package/RePrintOuterBarCode",data:this.packageMsg,method:"POST"}).then(function(a){var e;200==a.data.Code?(e="success",a.data.Data.forEach(function(t){CSManager.PrintBarcode(JSON.stringify(t))}),t.$emit("reprint-to-father")):e="error",t.showInformation({classify:"message",msg:a.data.Msg,type:e})}).catch(function(t){}):axios({url:"/api/Package/RePrintBarCode",data:this.packageMsg,method:"POST"}).then(function(a){var e;200==a.data.Code?(e="success",a.data.Data.forEach(function(t){CSManager.PrintBarcode(JSON.stringify(t))}),t.$emit("reprint-to-father")):e="error",t.showInformation({classify:"message",msg:a.data.Msg,type:e})}).catch(function(t){}):this.showInformation({classify:"message",msg:"请查询条码！"})}},computed:{countPrintNumber:function(){return this.packageMsg.IsOuterProduct?""==this.packageMsg.SplitCount||void 0==this.packageMsg.SplitCount?0:this.packageMsg.SplitCount.length*this.packageMsg.PrintCount:this.packageMsg.PrintCount}}}),l=o,p=(e("821d"),e("2877")),d=Object(p["a"])(l,r,c,!1,null,null,null),u=d.exports,h=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"reprintList"}},[e("div",{staticClass:"print_box table_unExpand"},[e("div",{staticClass:"search_box"},[e("p",[t._v("包条码")]),e("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{placeholder:"请输入包条码"},model:{value:t.search_str,callback:function(a){t.search_str="string"===typeof a?a.trim():a},expression:"search_str"}}),e("el-button",{on:{click:t.searchBarCode}},[t._v("查询")])],1),e("div",{staticClass:"container"},[e("ul",[e("li",[e("p",[t._v("包条码")]),e("span",[t._v(t._s(t.packageMsg.ProductName))])]),e("li",[e("p",[t._v("包名称")]),e("span",[t._v(t._s(t.packageMsg.ProductName))])]),e("li",[e("p",[t._v("外包装")]),e("span",[t._v(t._s(t.packageMsg.ExternalPackage))])]),e("li",[e("p",[t._v("配包人")]),e("span",[t._v(t._s(t.packageMsg.PackagePerson))])]),e("li",[e("p",[t._v("审核人")]),e("span",[t._v(t._s(t.packageMsg.PackageReviewer))])]),e("li",[e("p",[t._v("所属科室")]),e("span",[t._v(t._s(t.packageMsg.SubClinicName))])]),e("li",[e("p",[t._v("包状态")]),e("span",[t._v(t._s(t.packageMsg.Status))])]),e("li",[e("p",[t._v("灭菌日期")]),e("span",[t._v(t._s(t.packageMsg.SterilizeDate))])]),e("li",[e("p",[t._v("有效日期")]),e("span",[t._v(t._s(t.packageMsg.ValidDate))])]),e("li",[e("p",[t._v("打印份数")]),e("el-input-number",{attrs:{min:1,max:999,controls:!1},on:{change:t.inputNumberChange},model:{value:t.packageMsg.PrintCount,callback:function(a){t.$set(t.packageMsg,"PrintCount",a)},expression:"packageMsg.PrintCount"}})],1)]),e("el-table",{attrs:{data:t.packageMsg.Instruments}},[e("el-table-column",{attrs:{label:"器械名称",prop:"InstrumentName",width:"210"}}),e("el-table-column",{attrs:{label:"规格",prop:"Specification",width:"150"}}),e("el-table-column",{attrs:{label:"数量",prop:"Quantity",width:"100"}})],1)],1),e("div",{staticClass:"option"},[e("el-button",{staticClass:"btn88x32empty",on:{click:t.cancelPrint}},[t._v("取消")]),e("el-button",{staticClass:"btn88x32",attrs:{type:"primary"},on:{click:t.confirmPrint}},[t._v("确定")])],1)])])},g=[],v={data:function(){return{search_str:"",packageMsg:{},data:[{},{},{}]}},methods:{inputNumberChange:function(t){var a=this;void 0==t&&setTimeout(function(){a.packageMsg.PrintCount=1},0)},confirmPrint:function(){var t=this;this.packageMsg.BarCode?axios({url:"/api/Package/RePrintInstrumentList",method:"POST",data:this.packageMsg}).then(function(a){var e;200==a.data.Code?(e="success",a.data.Data.forEach(function(t){CSManager.PrintBarcode(JSON.stringify(t))}),t.$emit("reprintList-to-father")):e="error",t.showInformation({classify:"message",msg:a.data.Msg,type:e})}).catch(function(t){}):this.showInformation({classify:"message",msg:"请查询条码！"})},cancelPrint:function(){this.$emit("reprintList-to-father")},searchBarCode:function(){var t=this;this.GLOBAL.VerificationHandle({val:this.search_str,type:"StringNotEmpty",msg:"搜索的条码不能为空！"})&&axios({url:"/api/Package/RePrintInstrumentList/".concat(this.search_str)}).then(function(a){200==a.data.Code?(a.data.Data.BarCode=t.search_str,a.data.Data.PrintCount=1,t.packageMsg=a.data.Data):t.showInformation({classify:"message",msg:a.data.Msg})}).catch(function(t){})}}},m=v,f=(e("9d94"),Object(p["a"])(m,h,g,!1,null,null,null)),_=f.exports,k={data:function(){return{isShowReprintList:!1,isShowReprint:!1,isShowPhoto:!1,search_date:[],endDateLimit:{},recordList:[],photoData:[]}},components:{PhotoView:n["a"],Reprint:u,ReprintList:_},created:function(){var t=this.GLOBAL.GetNowDate();this.search_date=[t,t],this.searchRecordsData()},mounted:function(){},methods:{reprintToFather:function(){this.isShowReprint=!1},handleReprint:function(){this.isShowReprint=!0},reprintListToFather:function(){this.isShowReprintList=!1},handleReprintList:function(){this.isShowReprintList=!0},viewPhotoToFather:function(){this.isShowPhoto=!1},handleShowPhotos:function(t){var a=this;void 0==this.recordList[t].Pictures?axios({url:"/api/Package/Picture/".concat(this.recordList[t].Id)}).then(function(e){a.recordList[t].Pictures=e.data.Data,a.photoData=a.recordList[t].Pictures,a.isShowPhoto=!0}).catch(function(t){}):(this.photoData=this.recordList[t].Pictures,this.isShowPhoto=!0)},collapseChange:function(t){var a=this;""!=t&&""==this.recordList[t].PackageInfoForPackageTaskReceives&&0==this.recordList[t].IsNotBarCodeProduct&&axios({url:"/api/Package/PackageTaskReceiveDetail/".concat(this.recordList[t].Id)}).then(function(e){200==e.data.Code?a.recordList[t].PackageInfoForPackageTaskReceives=e.data.Data:a.showInformation({classify:"message",msg:e.data.Msg})})},track:function(t,a,e){this.$router.push({path:"/track/package",query:{BarCode:e}})},searchRecordsData:function(){this.GLOBAL.searchRecord(this.search_date[0],this.search_date[1],this,"/odata/PackageTaskReceiveRecords","PackageTaskReceiveDate")}}},P=k,C=(e("8038"),Object(p["a"])(P,s,i,!1,null,null,null));a["default"]=C.exports},"68c0":function(t,a,e){"use strict";var s=e("c38f"),i=e.n(s);i.a},8038:function(t,a,e){"use strict";var s=e("2911"),i=e.n(s);i.a},"821d":function(t,a,e){"use strict";var s=e("ccca"),i=e.n(s);i.a},"9d94":function(t,a,e){"use strict";var s=e("1d68"),i=e.n(s);i.a},ac6a:function(t,a,e){for(var s=e("cadf"),i=e("0d58"),n=e("2aba"),r=e("7726"),c=e("32e9"),o=e("84f2"),l=e("2b4c"),p=l("iterator"),d=l("toStringTag"),u=o.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=i(h),v=0;v<g.length;v++){var m,f=g[v],_=h[f],k=r[f],P=k&&k.prototype;if(P&&(P[p]||c(P,p,u),P[d]||c(P,d,f),o[f]=u,_))for(m in s)P[m]||n(P,m,s[m],!0)}},c38f:function(t,a,e){},ccca:function(t,a,e){}}]);