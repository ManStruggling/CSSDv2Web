(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02340e32"],{"1a10":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"photoView"}},[i("div",{staticClass:"container"},[i("div",{staticClass:"view_menu"},[e.$props.viewMode?e._e():i("h3",[i("p",{on:{click:e.switchToTakePhoto}})]),i("el-tabs",{attrs:{type:"card","tab-position":"left"},on:{"tab-click":e.tabClicked},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.list,function(t,a){return i("el-tab-pane",{key:a,attrs:{name:a+""}},[i("div",{staticClass:"imageListBox",attrs:{slot:"label"},slot:"label"},[i("img",{attrs:{src:t.Path||t.Base64String,alt:""}}),e.$props.viewMode?e._e():i("i",{staticClass:"deleteImg",on:{click:function(t){return t.stopPropagation(),e.deleteImg(a)}}})]),i("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:0==e.mode,expression:"mode==0"}],staticClass:"tab_content"},[i("img",{attrs:{src:t.Path||t.Base64String,alt:""}}),e.$props.viewMode?e._e():i("el-input",{attrs:{type:"textarea",placeholder:"备注",resize:"none"},model:{value:t.Remark,callback:function(i){e.$set(t,"Remark","string"===typeof i?i.trim():i)},expression:"item.Remark"}}),e.$props.viewMode?i("p",[e._v(e._s(t.Remark))]):e._e()],1)])],1)}),1)],1),i("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:1===e.mode,expression:"mode===1"}],staticClass:"view_content"},[i("img",{attrs:{src:e.image,alt:""}}),i("h5",[i("el-button",{staticClass:"btn120x40",on:{click:e.takePhoto}},[e._v("拍照")])],1)])]),i("i",{staticClass:"closePhotoView",on:{click:e.close}})],1)])},s=[],n={props:["data","viewMode","DeletedPicturesId"],data:function(){return{activeName:"-1",mode:0,image:"",list:[]}},created:function(){this.list=null==this.$props.data?[]:this.$props.data,this.list.length>0&&(this.activeName=0),this.$props.viewMode||this.switchToTakePhoto()},beforeDestroy:function(){CSManager.CloseVideo()},methods:{close:function(){this.$emit("viewPhoto-to-father",this.list)},switchToTakePhoto:function(){this.$props.viewMode||CSManager.OpenVideo(50,"",this),this.mode=1},takePhoto:function(){this.list.push({Id:0,Path:"",Base64String:this.image,Remark:""}),this.mode=0,this.activeName=this.list.length-1+""},deleteImg:function(e){var t=this;this.$confirm("您确定要删除该照片?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){0!=t.list[e].Id&&t.$props.DeletedPicturesId.push(t.list[e].Id),t.list.splice(e,1)}).catch(function(){})},tabClicked:function(){this.mode=0}}},o=n,r=(i("68c0"),i("2877")),l=Object(r["a"])(o,a,s,!1,null,null,null);t["a"]=l.exports},"3d56":function(e,t,i){"use strict";var a=i("da02"),s=i.n(a);s.a},"4e2b":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cssd_box",attrs:{id:"sterilizeCheck"}},[i("div",{staticClass:"cssd_title"},[i("ul",{staticClass:"cssd_menu"},[i("li",{on:{click:e.goBack}},[i("p",[e._v("返回")])]),i("li",{on:{click:e.fastLocation}},[i("p",[e._v("快速定位")])]),i("li",{on:{click:e.biologyCheck}},[i("p",[e._v("生物监测")])]),i("router-link",{attrs:{to:"/sterilize/checkRecord",tag:"li"}},[i("p",[e._v("灭菌审核记录")])]),i("router-link",{attrs:{to:"/sterilize/recallRecord",tag:"li"}},[i("p",[e._v("召回记录")])])],1)]),i("div",{staticClass:"cssd_table_center cssd_table_subTabs review_check"},[i("div",{staticClass:"cssd_table_left"},[i("div",{staticClass:"cssd_talbe_left_menu"},[i("dl",{staticClass:"isActive"},[e._m(0),i("dd",{staticClass:"reviewDd",staticStyle:{display:"block"}},[i("el-tabs",{attrs:{"tab-position":"left",activeName:e.pendingReviewActiveName},on:{"tab-click":e.tabClick}},e._l(e.sterilizeTask.PendingReview,function(t,a){return i("el-tab-pane",{key:a,attrs:{label:t.SterilizeTaskBarCode,name:a+""}},[i("div",{staticClass:"tab_content table_unExpand"},[i("ul",{staticClass:"clear_float"},[i("li",[i("p",[e._v("灭菌开始时间")]),i("span",[e._v(e._s(t.SterilizeStartDate))])]),i("li",[i("p",[e._v("灭菌结束时间")]),i("span",[e._v(e._s(t.SterilizeEndDate))])]),i("li",[i("p",[e._v("灭菌人")]),i("span",[e._v(e._s(t.Sterilizer))])])]),i("ul",{staticClass:"clear_float"},[i("li",[i("p",[e._v("灭菌设备")]),i("span",[e._v(e._s(t.SterilizeDeviceName))])]),i("li",[i("p",[e._v("灭菌程序")]),i("span",[e._v(e._s(t.SterilizeProgramName))])])]),i("ul",{staticClass:"clear_float"},[i("li",[i("p",[e._v("灭菌当日锅次")]),i("span",[e._v(e._s(t.SterilizeTodayBatch))])]),i("li",[i("p",[e._v("灭菌总锅次")]),i("span",[e._v(e._s(t.SterilizeTotalBatch))])])]),i("ul",{staticClass:"clear_float"},[i("li",[i("p",[e._v("质量检测类型")]),i("span",[e._v("化学检测")])]),i("li",[i("p",[e._v("质量检测结果")]),i("el-select",{staticClass:"green24x13",model:{value:t[t.ReviewType],callback:function(i){e.$set(t,t.ReviewType,i)},expression:"item[item.ReviewType]"}},[i("el-option",{attrs:{label:"合格",value:2}}),i("el-option",{attrs:{label:"不合格",value:3}})],1)],1)]),i("ul",{staticClass:"clear_float"},[i("li",[i("p",[e._v("官腔检测结果")]),i("el-select",{staticClass:"green24x13",model:{value:t.CatheterReviewStatus,callback:function(i){e.$set(t,"CatheterReviewStatus",i)},expression:"item.CatheterReviewStatus"}},[i("el-option",{attrs:{label:"合格",value:2}}),i("el-option",{attrs:{label:"不合格",value:3}}),i("el-option",{attrs:{label:"未检测",value:4}})],1)],1)]),i("div",{staticClass:"photoOption"},[i("span",[e._v("已拍照片")]),i("p",[i("s",[e._v(e._s(e.computedPhotoNumber(a)))]),i("a",{on:{click:function(t){return e.handleShowPhotos(a)}}},[e._v("拍照")])])]),i("h5"),i("div",{staticClass:"content_title"},[i("p",[e._v("包条码")]),i("p",[e._v("包名称")]),i("p",[e._v("包数量")]),i("p",[e._v("不合格原因")]),i("p",[e._v("操作")])]),i("el-table",{attrs:{data:t.SterilizeFailedPackages,"show-header":!1}},[i("el-table-column",{attrs:{label:"包条码",prop:"BarCode",width:"240"}}),i("el-table-column",{attrs:{label:"包名称",prop:"ProductName",width:"210"}}),i("el-table-column",{attrs:{label:"包数量",prop:"ProductQuantity",width:"210"}}),i("el-table-column",{attrs:{label:"不合格原因",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-select",{staticClass:"green24x13",model:{value:t.row.FailedCauseId,callback:function(i){e.$set(t.row,"FailedCauseId",i)},expression:"props.row.FailedCauseId"}},e._l(e.failedCauses,function(e,t){return i("el-option",{key:t,attrs:{label:e.FailedCause,value:e.FailedCauseId}})}),1)]}}],null,!0)}),i("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:e._u([{key:"default",fn:function(a){return[i("el-button",{on:{click:function(i){return e.deleteFailedPackage(a.$index,t)}}},[e._v("删除")])]}}],null,!0)}),i("el-table-column")],1),i("h6",[i("el-button",{staticClass:"btn120x40",attrs:{type:"primary"},on:{click:function(t){return e.addFailedPackage(a)}}},[e._v("新增不合格包")]),i("el-button",{on:{click:function(t){return e.addFailedCountPackage(a)}}},[e._v("新增计数包")])],1),i("div",{staticClass:"tab_content_bottom"},[i("el-button",{staticClass:"btn150x40main",attrs:{type:"primary"},on:{click:function(t){return e.submitCheckResult(a)}}},[e._v("审核完成")])],1)],1)])}),1)],1)]),i("dl",[e._m(1),i("dd",{staticClass:"reviewDd"},[i("el-tabs",{attrs:{"tab-position":"left",activeName:e.sterilizingActiveName}},e._l(e.sterilizeTask.Sterilizing,function(t,a){return i("el-tab-pane",{key:a,attrs:{label:t.SterilizeTaskBarCode,name:a+""}},[i("div",{staticClass:"tab_content"},[i("div",{staticClass:"timerBox"},[i("p",[e._v(e._s(e.timeFormatDuring(t.RemainingTime)))]),i("span",{on:{click:function(t){return e.resetDeviceTime(a)}}})]),i("ul",{staticClass:"clear_float"},[i("li",[i("p",[e._v("灭菌开始时间")]),i("span",[e._v(e._s(t.SterilizeStartDate))])]),i("li",[i("p",[e._v("灭菌人")]),i("span",[e._v(e._s(t.Sterilizer))])])]),i("ul",{staticClass:"clear_float"},[i("li",[i("p",[e._v("灭菌设备")]),i("span",[e._v(e._s(t.SterilizeDeviceName))])]),i("li",[i("p",[e._v("灭菌程序")]),i("span",[e._v(e._s(t.SterilizeProgramName))])])]),i("ul",{staticClass:"clear_float"},[i("li",[i("p",[e._v("灭菌当日锅次")]),i("span",[e._v(e._s(t.SterilizeTodayBatch))])]),i("li",[i("p",[e._v("灭菌总锅次")]),i("span",[e._v(e._s(t.SterilizeTotalBatch))])])])])])}),1)],1)])])]),i("div",{staticClass:"cssd_table_right"})]),i("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[e.isShowFastLocation?i("div",{staticClass:"fast_location"},[i("dl",[i("dt",[i("el-input",{directives:[{name:"focus",rawName:"v-focus"}],nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.SaveOption(t)}},model:{value:e.input_str,callback:function(t){e.input_str="string"===typeof t?t.trim():t},expression:"input_str"}})],1),i("dd",[i("el-button",{attrs:{type:"primary"},on:{click:e.cancelOption}},[e._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.SaveOption}},[e._v("确定")])],1)])]):e._e()]),i("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[e.isShowBiologyCheck?i("BiologyCheck",{on:{"biology-to-father":e.biologyToFather}}):e._e()],1),i("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[e.isShowManualEnter?i("ManualEnter",{attrs:{task_index:e.task_index,ApiUrl:"/api/Scanner/SterilizerReviewFailed/"+e.sterilizeTask.PendingReview[e.task_index].SterilizeTaskId,BarCodeList:e.sterilizeTask.PendingReview[e.task_index].SterilizeFailedPackages},on:{"to-father":e.packageData2father}}):e._e()],1),i("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[e.isShowFailedCountPackages?i("FailedCountPackages",{attrs:{task_index:e.task_index,ApiUrl:"/api/Sterilize/SterilizeNotBarCodePackage/"+e.sterilizeTask.PendingReview[e.task_index].SterilizeTaskId},on:{"failedCountNumber-to-father":e.failedCountPackagesData2father}}):e._e()],1),i("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[e.isShowPhoto?i("PhotoView",{attrs:{data:e.photoData},on:{"viewPhoto-to-father":e.viewPhotoToFather}}):e._e()],1)],1)},s=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("dt",{staticClass:"pendingReview reviewStatus"},[i("span",[e._v("待审核")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("dt",{staticClass:"sterilizing reviewStatus"},[i("span",[e._v("灭菌中")])])}],n=(i("7514"),i("ac6a"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"biologyCheck"}},[i("div",{staticClass:"editContainer"},[i("div",{staticClass:"editContent"},[i("div",{staticClass:"sterilize_search"},[i("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{placeholder:"请输入灭菌编号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.search_str,callback:function(t){e.search_str="string"===typeof t?t.trim():t},expression:"search_str"}}),i("el-button",{staticClass:"btn120x40",attrs:{type:"primary"},on:{click:e.searchData}},[e._v("查询")])],1),i("ul",[i("li",[i("p",[e._v("灭菌开始时间")]),i("span",[e._v(e._s(e.data.SterilizeStartDate))])]),i("li",[i("p",[e._v("灭菌结束时间")]),i("span",[e._v(e._s(e.data.SterilizeEndDate))])]),i("li",[i("p",[e._v("灭菌设备")]),i("span",[e._v(e._s(e.data.SterilizeDevice))])]),i("li",[i("p",[e._v("灭菌程序")]),i("span",[e._v(e._s(e.data.SterilizeProgram))])]),i("li",[i("p",[e._v("灭菌人")]),i("span",[e._v(e._s(e.data.SterilizePerson))])]),i("li",[i("p",[e._v("当日锅次")]),i("span",[e._v(e._s(e.data.SterilizeTodayBatch))])]),i("li",[i("p",[e._v("总锅次")]),i("span",[e._v(e._s(e.data.SterilizeTotalBatch))])]),i("li",[i("p",[e._v("生物检测结果")]),i("el-select",{staticClass:"green18x10",model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[i("el-option",{attrs:{label:"不合格",value:!1}}),i("el-option",{attrs:{label:"合格",value:!0}})],1)],1)]),i("div",{staticClass:"photoOption"},[i("span",[e._v("已拍照片")]),i("p",[i("s",[e._v(e._s(e.computedPhotoNumber))]),i("a",{on:{click:e.handleShowPhotos}},[e._v("拍照")])])]),i("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[e.isShowPhoto?i("PhotoView",{attrs:{data:e.data.Pictures},on:{"viewPhoto-to-father":e.viewPhotoToFather}}):e._e()],1)],1),i("div",{staticClass:"boxOption"},[i("el-button",{staticClass:"btn88x32empty",on:{click:e.CancelSave}},[e._v("取消")]),i("el-button",{staticClass:"btn88x32",attrs:{type:"primary"},on:{click:e.BoxSave}},[e._v("审核完成")])],1)])])}),o=[],r=i("1a10"),l={data:function(){return{status:!0,isShowPhoto:!1,search_str:"",data:{SterilizeTaskId:0,SterilizeStartDate:"",SterilizeEndDate:"",SterilizeDevice:"",SterilizeProgram:"",SterilizePerson:"",SterilizeTodayBatch:"",SterilizeTotalBatch:"",Pictures:[]}}},components:{PhotoView:r["a"]},created:function(){CSManager.handleDataThis=this},mounted:function(){},methods:{viewPhotoToFather:function(){this.isShowPhoto=!1},handleShowPhotos:function(e){this.isShowPhoto=!0},searchData:function(){var e=this;this.GLOBAL.VerificationHandle([{val:this.search_str,type:"StringNotEmpty",msg:"搜索灭菌编号不能为空！"}])&&axios({url:"/api/Sterilize/BiologicalReviewSearch/".concat(this.search_str)}).then(function(t){200==t.data.Code?Object.assign(e.data,t.data.Data):e.showInformation({classify:"message",msg:t.data.Msg})}).catch(function(e){})},CancelSave:function(){this.$emit("biology-to-father","")},BoxSave:function(){var e=this;this.GLOBAL.VerificationHandle([{val:this.data.SterilizeTaskId,type:"NumberNotZero",msg:"您还没有查询灭菌编号！请查询灭菌编号！"}])&&(this.status?axios({url:"/api/Sterilize/BiologicalReviewSuccess",method:"POST",data:{SterilizeTaskId:this.data.SterilizeTaskId,Pictures:this.data.Pictures}}).then(function(t){200==t.data.Code?e.$router.go(0):e.showInformation({classify:"message",msg:t.data.Msg})}):this.$confirm("确认生物检测不合格,并发起一键召回吗?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.push({path:"/sterilize/recall",query:{sterilizeTaskId:e.data.SterilizeTaskId}})}).catch(function(){}))},handleBarCode:function(e){this.search_str=e,this.searchData()}},computed:{computedPhotoNumber:function(){return this.data.Pictures.length}}},c=l,d=(i("3d56"),i("2877")),u=Object(d["a"])(c,n,o,!1,null,null,null),h=u.exports,p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"basic_package_box",attrs:{id:"failed_count_number_package"},on:{click:function(t){return t.target!==t.currentTarget?null:e.cancelSend(t)}}},[i("div",{staticClass:"package_box"},[i("h3",[i("el-input",{attrs:{placeholder:"请输入拼音简码"},on:{input:e.packageSearch},model:{value:e.searchShortCode,callback:function(t){e.searchShortCode=t},expression:"searchShortCode"}})],1),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.packageList,"tooltip-effect":"dark","max-height":"280",width:"400","row-key":e.getRowKeys},on:{"selection-change":e.handleSelectionChange,"row-click":e.handleRowClick}},[i("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),i("el-table-column",{attrs:{prop:"ProductName",label:"包名称",width:"120","show-overflow-tooltip":!0}}),i("el-table-column",{attrs:{prop:"ProvideSubClinicName",label:"回收科室",width:"120"}}),i("el-table-column",{attrs:{label:"数量","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input-number",{attrs:{controls:!1,min:1,max:t.row.MaxProductQuantity},on:{change:function(i,a){e.handleNumberChange(i,a,t.$index)}},model:{value:t.row.ProductQuantity,callback:function(i){e.$set(t.row,"ProductQuantity",i)},expression:"props.row.ProductQuantity"}})]}}])})],1),i("h4",[i("el-button",{on:{click:e.cancelSend}},[e._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.sendToFather}},[e._v("确定")])],1)],1)])},v=[],f={data:function(){return{searchShortCode:"",packageList:[],multipleSelection:[]}},props:["task_index","ApiUrl"],methods:{handleRowClick:function(e){this.$refs.multipleTable.toggleRowSelection(e)},handleNumberChange:function(e,t,i){var a=this;void 0==e&&setTimeout(function(){a.packageList[i].ProductQuantity=1},0)},cancelSend:function(){this.$emit("failedCountNumber-to-father","")},sendToFather:function(){this.$emit("failedCountNumber-to-father",{data:this.multipleSelection,index:this.$props.task_index})},packageSearch:function(){},handleSelectionChange:function(e){this.multipleSelection=e},getRowKeys:function(e){return e.Id}},created:function(){var e=this;axios({url:this.$props.ApiUrl}).then(function(t){200==t.data.Code?e.packageList=t.data.Data:e.showInformation({classify:"message",msg:t.data.Msg})}).catch(function(e){})}},m=f,g=(i("9d28"),Object(d["a"])(m,p,v,!1,null,null,null)),_=g.exports,k=i("d040"),w={data:function(){return{photoData:[],task_index:-1,input_str:"",isShowPhoto:!1,isShowFailedCountPackages:!1,isShowBiologyCheck:!1,isShowManualEnter:!1,isShowFastLocation:!1,pendingReviewActiveName:"0",sterilizingActiveName:"0",sterilizeTaskIndex:"0",failedCauses:[],sterilizeTask:{Sterilizing:[],PendingReview:[]}}},components:{ManualEnter:k["a"],BiologyCheck:h,FailedCountPackages:_,PhotoView:r["a"]},created:function(){var e=this;CSManager.handleDataThis=this,axios({url:"/api/Sterilize/GetSterilizeReviewTask"}).then(function(t){200==t.data.Code?(e.sterilizeTask=t.data.Data,e.failedCauses=t.data.Data.FailedCauses,e.sterilizeTask.Sterilizing&&e.sterilizeTask.Sterilizing.forEach(function(t,i){t["Countdown"+i]=setInterval(function(){t.RemainingTime--,t.RemainingTime<=0&&(clearInterval(t["Countdown"+i]),e.$router.go(0))},1e3)})):e.showInformation({classify:"message",msg:t.data.Msg})}).catch(function(e){})},mounted:function(){$(".cssd_table_subTabs").on("click","dt.reviewStatus",function(){$(this).siblings().stop().slideToggle("fast").end().parent().toggleClass("isActive").siblings().removeClass("isActive").find("dd").stop().slideUp("fast")})},beforeDestroy:function(){CSManager.handleDataThis=null,this.sterilizeTask.Sterilizing&&this.sterilizeTask.Sterilizing.forEach(function(e,t){clearInterval(e["Countdown"+t])})},methods:{viewPhotoToFather:function(){this.isShowPhoto=!1},handleShowPhotos:function(e){this.photoData=this.sterilizeTask.PendingReview[e].Pictures,this.isShowPhoto=!0},biologyToFather:function(){this.isShowBiologyCheck=!1,CSManager.handleDataThis=this},biologyCheck:function(){this.isShowBiologyCheck=!0},resetDeviceTime:function(e){var t=this;axios({url:"/api/Sterilize/ReturnDeviceTimeToZero/".concat(this.sterilizeTask.Sterilizing[e].SterilizeDeviceId)}).then(function(e){var i;200==e.data.Code?(i="success",t.$router.go(0)):i="error",t.showInformation({classify:"message",msg:e.data.Msg,type:i})}).catch(function(e){})},goBack:function(){this.$router.push("/sterilize/select")},tabClick:function(e){this.pendingReviewActiveName=e.index},cancelOption:function(){this.isShowFastLocation=!1,this.input_str=""},SaveOption:function(){var e=this;this.isShowFastLocation=!1,this.sterilizeTask.PendingReview&&this.sterilizeTask.PendingReview.forEach(function(t,i){if(e.input_str.toUpperCase()==t.SterilizeTaskBarCode)return e.sterilizingActiveName="-1",e.pendingReviewActiveName=i+"",$(".pendingReview").siblings().stop().slideDown("fast").end().parent().addClass("isActive").siblings().removeClass("isActive").find("dd.reviewDd").stop().slideUp("fast"),void $(".cssd_talbe_left_menu").animate({scrollTop:60+40*i},1e3)}),this.sterilizeTask.Sterilizing&&this.sterilizeTask.Sterilizing.forEach(function(t,i){if(e.input_str.toUpperCase()==t.SterilizeTaskBarCode)return e.pendingReviewActiveName="-1",e.sterilizingActiveName=i+"",$(".sterilizing").siblings().stop().slideDown("fast").end().parent().addClass("isActive").siblings().removeClass("isActive").find("dd.reviewDd").stop().slideUp("fast"),void $(".cssd_talbe_left_menu").animate({scrollTop:120+40*i},1e3)}),this.input_str=""},fastLocation:function(){this.isShowFastLocation=!0},addFailedPackage:function(e){this.task_index=e,this.isShowManualEnter=!0},addFailedCountPackage:function(e){this.task_index=e,this.isShowFailedCountPackages=!0},packageData2father:function(e){this.isShowManualEnter=!1,e&&this.sterilizeTask.PendingReview[e.index].SterilizeFailedPackages.push(e.data.Package)},failedCountPackagesData2father:function(e){if(this.isShowFailedCountPackages=!1,e)for(var t=0;t<e.data.length;t++){for(var i=!0,a=0;a<this.sterilizeTask.PendingReview[e.index].SterilizeFailedPackages.length;a++)if(this.sterilizeTask.PendingReview[e.index].SterilizeFailedPackages[a].ProductId===e.data[t].ProductId){i=!1,this.sterilizeTask.PendingReview[e.index].SterilizeFailedPackages[a].ProductQuantity+=e.data[t].ProductQuantity,this.sterilizeTask.PendingReview[e.index].SterilizeFailedPackages[a].ProductQuantity>e.data[t].MaxProductQuantity&&(this.sterilizeTask.PendingReview[e.index].SterilizeFailedPackages[a].ProductQuantity=e.data[t].MaxProductQuantity);break}i&&this.sterilizeTask.PendingReview[e.index].SterilizeFailedPackages.push(e.data[t])}},deleteFailedPackage:function(e,t){t.SterilizeFailedPackages.splice(e,1)},submitCheckResult:function(e){var t=this;if("ChemicalReviewStatus"!=this.sterilizeTask.PendingReview[e].ReviewType||3!=this.sterilizeTask.PendingReview[e].ChemicalReviewStatus){this.sterilizeTask.PendingReview[e].ReviewResultVm={ReviewType:this.sterilizeTask.PendingReview[e].ReviewType,ReviewResult:this.sterilizeTask.PendingReview[e][this.sterilizeTask.PendingReview[e].ReviewType]};for(var i=0;i<this.sterilizeTask.PendingReview[e].SterilizeFailedPackages.length;i++)if(!this.sterilizeTask.PendingReview[e].SterilizeFailedPackages[i].FailedCauseId)return void this.showInformation({classify:"message",msg:"请选择不合格原因！"});axios({url:"/api/Sterilize/SterilizeReviewComplete",method:"POST",data:this.sterilizeTask.PendingReview[e]}).then(function(e){var i;200==e.data.Code?(i="success",t.$router.go(0)):i="error",t.showInformation({classify:"message",msg:e.data.Msg,type:i})}).catch(function(e){})}else this.$confirm("确认化学检测不合格,并重新生成配包任务吗?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){axios({url:"/api/Sterilize/ChemicalSterilizeReviewFailed",method:"POST",data:t.sterilizeTask.PendingReview[e]}).then(function(e){var i;200==e.data.Code?(i="success",t.$router.go(0)):i="error",t.showInformation({classify:"message",msg:e.data.Msg,type:i})}).catch(function(e){})}).catch(function(){})},handleBarCode:function(e){var t=this;if(/^MJR/.test(e))this.input_str=e,this.SaveOption();else if(console.log("run"),this.sterilizeTask.PendingReview[this.pendingReviewActiveName]){var i=!0;this.sterilizeTask.PendingReview[this.pendingReviewActiveName].SterilizeFailedPackages.forEach(function(a){if(a.BarCode==e.toUpperCase())return t.showInformation({classify:"message",msg:"该条码已录入！",type:"warning"}),void(i=!1)}),i&&axios({url:"/api/Scanner/SterilizerReviewFailed/".concat(this.sterilizeTask.PendingReview[this.pendingReviewActiveName].SterilizeTaskId,"/").concat(e)}).then(function(e){200==e.data.Code?(t.isShowManualEnter=!1,t.sterilizeTask.PendingReview[t.pendingReviewActiveName].SterilizeFailedPackages.push(e.data.Data.Package)):t.showInformation({classify:"message",msg:e.data.Msg})}).catch(function(e){})}}},computed:{timeFormatDuring:function(){return function(e){var t=parseInt(e%86400/3600),i=parseInt(e%3600/60),a=e%60;return t=t<10?"0"+t:t,i=i<10?"0"+i:i,a=a<10?"0"+a:a,t+":"+i+":"+a}},computedPhotoNumber:function(){var e=this;return function(t){return null==e.sterilizeTask.PendingReview[t].Pictures?0:e.sterilizeTask.PendingReview[t].Pictures.length}}}},S=w,C=(i("d38e"),Object(d["a"])(S,a,s,!1,null,null,null));t["default"]=C.exports},"68c0":function(e,t,i){"use strict";var a=i("c38f"),s=i.n(a);s.a},8654:function(e,t,i){},9460:function(e,t,i){},"9d28":function(e,t,i){"use strict";var a=i("d9af"),s=i.n(a);s.a},ac6a:function(e,t,i){for(var a=i("cadf"),s=i("0d58"),n=i("2aba"),o=i("7726"),r=i("32e9"),l=i("84f2"),c=i("2b4c"),d=c("iterator"),u=c("toStringTag"),h=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},v=s(p),f=0;f<v.length;f++){var m,g=v[f],_=p[g],k=o[g],w=k&&k.prototype;if(w&&(w[d]||r(w,d,h),w[u]||r(w,u,g),l[g]=h,_))for(m in a)w[m]||n(w,m,a[m],!0)}},c38f:function(e,t,i){},d040:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"manual_enter"}},[i("dl",[i("dt",[i("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{placeholder:"请扫描或手动录入条码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.SaveOption(t)}},model:{value:e.input_str,callback:function(t){e.input_str="string"===typeof t?t.trim():t},expression:"input_str"}})],1),i("dd",[i("el-button",{on:{click:e.cancelOption}},[e._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.SaveOption}},[e._v("确定")])],1)])])},s=[],n=(i("ac6a"),{props:["BarCodeList","ApiUrl","task_index","firstRequest"],data:function(){return{input_str:""}},created:function(){},mounted:function(){},methods:{cancelOption:function(){this.$emit("to-father","")},SaveOption:function(){var e=this;this.GLOBAL.VerificationHandle([{val:this.input_str,type:"StringNotEmpty",msg:"扫描条码不能为空！"}])&&(this.$props.firstRequest?axios("".concat(this.$props.ApiUrl,"/").concat(this.input_str)).then(function(t){if(200==t.data.Code)if(e.$props.task_index>=0)e.$emit("to-father",{data:t.data.Data,index:e.$props.task_index});else{if(t.data.Data.PackageBarCodeScannerVm)for(var i=0;i<e.$props.BarCodeList.length;i++)if(e.$props.BarCodeList[i].BarCode==t.data.Data.PackageBarCodeScannerVm.BarCode)return e.showInformation({classify:"message",msg:"该条码已录入！",type:"warning"}),void(e.input_str="");e.$emit("to-father",t.data.Data,e.input_str)}else 300==t.data.Code?(e.input_str="",e.showInformation({classify:"message",msg:t.data.Msg,type:"warning"})):(e.input_str="",e.showInformation({classify:"message",msg:t.data.Msg,type:"error"}))}).catch(function(e){}):(this.$props.BarCodeList.forEach(function(t){if(t.BarCode==e.input_str.toUpperCase())return e.showInformation({classify:"message",msg:"该条码已录入！",type:"warning"}),void(e.input_str="")}),axios("".concat(this.$props.ApiUrl,"/").concat(this.input_str)).then(function(t){200==t.data.Code?e.$props.task_index>=0?e.$emit("to-father",{data:t.data.Data,index:e.$props.task_index}):e.$emit("to-father",t.data.Data,e.input_str):300==t.data.Code?(e.input_str="",e.showInformation({classify:"message",msg:t.data.Msg,type:"warning"})):(e.input_str="",e.showInformation({classify:"message",msg:t.data.Msg,type:"error"}))}).catch(function(e){})))}}}),o=n,r=(i("dda8"),i("2877")),l=Object(r["a"])(o,a,s,!1,null,null,null);t["a"]=l.exports},d38e:function(e,t,i){"use strict";var a=i("8654"),s=i.n(a);s.a},d9af:function(e,t,i){},da02:function(e,t,i){},dda8:function(e,t,i){"use strict";var a=i("9460"),s=i.n(a);s.a}}]);