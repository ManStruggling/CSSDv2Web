(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32353b75"],{"2b71":function(t,a,e){"use strict";var i=e("ee45"),s=e.n(i);s.a},"34e9":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cssd_box",attrs:{id:"sterilizeCheckRecordChange"}},[e("div",{staticClass:"cssd_title"},[e("ul",{staticClass:"cssd_menu"},[e("li",[e("router-link",{attrs:{to:"/sterilize/checkRecord",tag:"p"}},[t._v("返回")])],1)])]),e("div",{staticClass:"cssd_table_center cssd_totalBar"},[e("div",{staticClass:"tab_content"},[e("ul",{staticClass:"clear_float"},[e("li",[e("p",[t._v("灭菌开始时间")]),e("span",[t._v(t._s(t.data.SterilizeStartDate))])]),e("li",[e("p",[t._v("灭菌结束时间")]),e("span",[t._v(t._s(t.data.SterilizeEndDate))])]),e("li",[e("p",[t._v("灭菌人")]),e("span",[t._v(t._s(t.data.Sterilizer))])])]),e("ul",{staticClass:"clear_float"},[e("li",[e("p",[t._v("灭菌设备")]),e("span",[t._v(t._s(t.data.SterilizeDeviceName))])]),e("li",[e("p",[t._v("灭菌程序")]),e("span",[t._v(t._s(t.data.SterilizeProgramName))])])]),e("ul",{staticClass:"clear_float"},[e("li",[e("p",[t._v("灭菌当日锅次")]),e("span",[t._v(t._s(t.data.SterilizeTodayBatch))])]),e("li",[e("p",[t._v("灭菌总锅次")]),e("span",[t._v(t._s(t.data.SterilizeTotalBatch))])])]),e("ul",{staticClass:"clear_float"},[e("li",[e("p",[t._v("质量检测类型")]),e("el-select",{staticClass:"green24x13",attrs:{disabled:!t.data.HasBiologicalTest},on:{change:t.reviewClassChange},model:{value:t.data.ReviewType,callback:function(a){t.$set(t.data,"ReviewType",a)},expression:"data.ReviewType"}},[e("el-option",{attrs:{label:"化学检测",value:"ChemicalReviewStatus"}}),e("el-option",{attrs:{label:"生物检测",value:"BiologicalReviewStatus"}})],1)],1),e("li",[e("p",[t._v("质量检测结果")]),e("el-select",{staticClass:"green24x13",attrs:{disabled:"ChemicalReviewStatus"==t.data.ReviewType||2==t.guideData.BiologicalReviewStatus||3==t.guideData.BiologicalReviewStatus},model:{value:t.data[t.data.ReviewType],callback:function(a){t.$set(t.data,t.data.ReviewType,a)},expression:"data[data.ReviewType]"}},[e("el-option",{attrs:{label:"合格",value:2}}),e("el-option",{attrs:{label:"不合格",value:3}})],1)],1)]),e("ul",{staticClass:"clear_float"},[e("li",[e("p",[t._v("官腔检测结果")]),e("el-select",{staticClass:"green24x13",model:{value:t.data.CatheterReviewStatus,callback:function(a){t.$set(t.data,"CatheterReviewStatus",a)},expression:"data.CatheterReviewStatus"}},[e("el-option",{attrs:{label:"合格",value:2}}),e("el-option",{attrs:{label:"不合格",value:3}}),e("el-option",{attrs:{label:"未检测",value:4}})],1)],1)]),e("h5",[e("el-button",{staticClass:"btn120x40"},[t._v("打开摄像头")])],1),t._m(0),e("el-table",{attrs:{data:t.data.SterilizeFailedPackages,"show-header":!1}},[e("el-table-column",{attrs:{label:"包条码",prop:"BarCode",width:"240"}}),e("el-table-column",{attrs:{label:"包名称",prop:"Name",width:"210"}}),e("el-table-column",{attrs:{label:"不合格原因",width:"210"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-select",{model:{value:a.row.FailedCause,callback:function(e){t.$set(a.row,"FailedCause",e)},expression:"props.row.FailedCause"}},[e("el-option",{attrs:{label:"指示胶带不合格",value:0}}),e("el-option",{attrs:{label:"湿包",value:1}})],1)]}}])}),e("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{on:{click:function(e){return t.deleteFailedPackage(a.$index,t.data)}}},[t._v("删除")])]}}])}),e("el-table-column")],1),e("h6",[e("el-button",{staticClass:"btn120x40",attrs:{type:"primary"},on:{click:function(a){return t.addFailedPackage()}}},[t._v("新增不合格包")]),e("el-button",[t._v("新增计数包")])],1),e("div",{staticClass:"tab_content_bottom cssd_table_bottom"},[e("el-button",{staticClass:"btn150x40main",on:{click:t.cancelChange}},[t._v("取消修改")]),e("el-button",{staticClass:"btn150x40main",attrs:{type:"primary"},on:{click:t.submitChangeResult}},[t._v("修改完成")])],1)],1),t.isShowManualEnter?e("ManualEnter",{attrs:{mode:1,ApiUrl:"/api/Scanner/SterilizeReady",BarCodeList:t.data.SterilizeFailedPackages},on:{"to-father":t.packageData2father}}):t._e()],1)])},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content_title"},[e("p",[t._v("包条码")]),e("p",[t._v("包名称")]),e("p",[t._v("包数量")]),e("p",[t._v("不合格原因")]),e("p",[t._v("操作")])])}],n=e("d040"),l={data:function(){return{isShowManualEnter:!1,data:{},guideData:{}}},components:{ManualEnter:n["a"]},created:function(){var t=this;this.$route.query.recordId&&axios({url:"/api/Sterilize/PendingUpdateSterilizeReviewRecord/".concat(this.$route.query.recordId)}).then(function(a){200==a.data.Code?(t.data=a.data.Data,t.guideData=Object.assign({},a.data.Data)):t.showInformation({classify:"message",msg:a.data.Msg})}).catch(function(t){})},mounted:function(){},methods:{addFailedPackage:function(){this.isShowManualEnter=!0},packageData2father:function(t){this.isShowManualEnter=!1,t&&(t.PackageBarCodeScannerVm.FailedCause=0,this.data.SterilizeFailedPackages.push(t.PackageBarCodeScannerVm))},deleteFailedPackage:function(t,a){a.SterilizeFailedPackages.splice(t,1)},reviewClassChange:function(t){"BiologicalReviewStatus"==t&&(this.data.BiologicalReviewStatus=2),"ChemicalReviewStatus"==t&&(this.data.BiologicalReviewStatus=this.guideData.BiologicalReviewStatus)},submitChangeResult:function(){var t=this;"BiologicalReviewStatus"==this.data.ReviewType&&3==this.data.BiologicalReviewStatus?this.$confirm("确认生物检测不合格,并发起一键召回吗?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.push({path:"/sterilize/recall",query:{sterilizeTaskId:t.data.SterilizeTaskId}})}).catch(function(){}):(this.data.ReviewResultVm={ReviewType:this.data.ReviewType,ReviewResult:this.data[this.data.ReviewType]},axios({url:"/api/Sterilize/SterilizeReviewRecordModify",method:"PUT",data:this.data}).then(function(a){var e;200==a.data.Code?(e="success",t.$router.push({path:"/sterilize/checkRecord"})):e="error",t.showInformation({classify:"message",msg:a.data.Msg,type:e})}).catch(function(t){}))},cancelChange:function(){this.$router.push({path:"/sterilize/checkRecord"})}}},o=l,r=(e("2b71"),e("2877")),c=Object(r["a"])(o,i,s,!1,null,null,null);a["default"]=c.exports},9460:function(t,a,e){},ac6a:function(t,a,e){for(var i=e("cadf"),s=e("0d58"),n=e("2aba"),l=e("7726"),o=e("32e9"),r=e("84f2"),c=e("2b4c"),d=c("iterator"),u=c("toStringTag"),p=r.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=s(h),v=0;v<f.length;v++){var m,_=f[v],g=h[_],S=l[_],C=S&&S.prototype;if(C&&(C[d]||o(C,d,p),C[u]||o(C,u,_),r[_]=p,g))for(m in i)C[m]||n(C,m,i[m],!0)}},d040:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"manual_enter"}},[e("dl",[e("dt",[e("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{placeholder:"请扫描或手动录入条码"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.SaveOption(a)}},model:{value:t.input_str,callback:function(a){t.input_str="string"===typeof a?a.trim():a},expression:"input_str"}})],1),e("dd",[e("el-button",{on:{click:t.cancelOption}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.SaveOption}},[t._v("确定")])],1)])])},s=[],n=(e("ac6a"),{props:["BarCodeList","ApiUrl","task_index","firstRequest"],data:function(){return{input_str:""}},created:function(){},mounted:function(){},methods:{cancelOption:function(){this.$emit("to-father","")},SaveOption:function(){var t=this;this.GLOBAL.VerificationHandle([{val:this.input_str,type:"StringNotEmpty",msg:"扫描条码不能为空！"}])&&(this.$props.firstRequest?axios("".concat(this.$props.ApiUrl,"/").concat(this.input_str)).then(function(a){if(200==a.data.Code)if(t.$props.task_index>=0)t.$emit("to-father",{data:a.data.Data,index:t.$props.task_index});else{if(a.data.Data.PackageBarCodeScannerVm)for(var e=0;e<t.$props.BarCodeList.length;e++)if(t.$props.BarCodeList[e].BarCode==a.data.Data.PackageBarCodeScannerVm.BarCode)return t.showInformation({classify:"message",msg:"该条码已录入！",type:"warning"}),void(t.input_str="");t.$emit("to-father",a.data.Data,t.input_str)}else 300==a.data.Code?(t.input_str="",t.showInformation({classify:"message",msg:a.data.Msg,type:"warning"})):(t.input_str="",t.showInformation({classify:"message",msg:a.data.Msg,type:"error"}))}).catch(function(t){}):(this.$props.BarCodeList.forEach(function(a){if(a.BarCode==t.input_str.toUpperCase())return t.showInformation({classify:"message",msg:"该条码已录入！",type:"warning"}),void(t.input_str="")}),axios("".concat(this.$props.ApiUrl,"/").concat(this.input_str)).then(function(a){200==a.data.Code?t.$props.task_index>=0?t.$emit("to-father",{data:a.data.Data,index:t.$props.task_index}):t.$emit("to-father",a.data.Data,t.input_str):300==a.data.Code?(t.input_str="",t.showInformation({classify:"message",msg:a.data.Msg,type:"warning"})):(t.input_str="",t.showInformation({classify:"message",msg:a.data.Msg,type:"error"}))}).catch(function(t){})))}}}),l=n,o=(e("dda8"),e("2877")),r=Object(o["a"])(l,i,s,!1,null,null,null);a["a"]=r.exports},dda8:function(t,a,e){"use strict";var i=e("9460"),s=e.n(i);s.a},ee45:function(t,a,e){}}]);