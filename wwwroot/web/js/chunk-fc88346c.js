(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fc88346c"],{1:function(t,e){},2:function(t,e){},3:function(t,e){},"34b2":function(t,e,a){"use strict";var i=a("e753"),n=a.n(i);n.a},"36e5":function(t,e,a){},"5bab":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"basic_main"},[a("div",{staticClass:"basic_main_head"},[a("p"),a("p",[t.GLOBAL.UserInfo.JobAndCompetence.includes("000")?a("a",{attrs:{href:"\\ImportBaseData\\科室汇入.xlsx",download:"科室汇入"}},[t._v("下载模板")]):t._e(),t.GLOBAL.UserInfo.JobAndCompetence.includes("000")?a("el-button",{staticClass:"importData"},[a("input",{attrs:{type:"file",id:"fileUploader",name:"fileUploader",accept:".xls, .xlsx"},on:{change:t.fileChange}})]):t._e(),a("el-button",{staticClass:"basic_ipt_add",attrs:{type:"primary"},on:{click:t.addTableTr}},[t._v("新增科室")])],1)]),a("div",{staticClass:"basic_table table_unExpand"},[a("el-table",{attrs:{data:t.table_data}},[a("el-table-column",{attrs:{label:"科室名称",prop:"Name",width:"240"}}),a("el-table-column",{attrs:{label:"拼音简码",prop:"ShortCode",width:"210"}}),a("el-table-column",{attrs:{label:"科室电话",prop:"Telephone",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(""==e.row.Telephone?"-":e.row.Telephone))]}}])}),a("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"change_this_tr",on:{click:function(a){return a.stopPropagation(),t.editThisTr(e.$index)}}},[t._v("编辑")]),a("a",{staticClass:"delete_this_tr",on:{click:function(a){return a.stopPropagation(),t.deleteThisTr(e.$index)}}},[t._v("删除")])]}}])}),a("el-table-column")],1)],1),a("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[t.showEditBox?a("ClinicBox",{attrs:{data:t.toChildData},on:{"to-father":t.child2father}}):t._e()],1)],1)},n=[],o=(a("ac6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"clinicBox",attrs:{id:"editBox"}},[a("div",{staticClass:"editContainer"},[a("div",{staticClass:"editContent table_unExpand"},[a("ul",{staticClass:"clear_float"},[a("li",[a("p",[t._v("科室名称")]),a("el-input",{attrs:{type:"text",placeholder:"科室名称(必填)",maxlength:"10"},model:{value:t.editBoxData.Name,callback:function(e){t.$set(t.editBoxData,"Name","string"===typeof e?e.trim():e)},expression:"editBoxData.Name"}})],1),a("li",[a("p",[t._v("科室简码")]),a("el-input",{attrs:{type:"text",disabled:!0},model:{value:t.editBoxData.ShortCode,callback:function(e){t.$set(t.editBoxData,"ShortCode",e)},expression:"editBoxData.ShortCode"}})],1),a("li",[a("p",[t._v("科室电话")]),a("el-input",{attrs:{type:"text",placeholder:"科室电话"},model:{value:t.editBoxData.Telephone,callback:function(e){t.$set(t.editBoxData,"Telephone","string"===typeof e?e.trim():e)},expression:"editBoxData.Telephone"}})],1),a("li",[a("p",[t._v("科室类型")]),a("el-select",{staticClass:"green24x13",attrs:{disabled:t.forbit,placeholder:"请选择(必填)"},model:{value:t.editBoxData.ClinicType,callback:function(e){t.$set(t.editBoxData,"ClinicType",e)},expression:"editBoxData.ClinicType"}},[a("el-option",{attrs:{label:"供应室",value:1}}),a("el-option",{attrs:{label:"科室",value:2}}),a("el-option",{attrs:{label:"手术室",value:3}}),a("el-option",{attrs:{label:"医院",value:4}})],1)],1)]),a("el-table",{attrs:{data:t.editBoxData.SubClinics}},[a("el-table-column",{attrs:{label:"子科室名称",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{placeholder:"子科室名称(必填)",maxlength:"10"},model:{value:e.row.Name,callback:function(a){t.$set(e.row,"Name","string"===typeof a?a.trim():a)},expression:"props.row.Name"}})]}}])}),a("el-table-column",{attrs:{label:"科室简码",prop:"ShortCode",width:"210"}}),a("el-table-column",{attrs:{label:"科室电话",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.Telephone,callback:function(a){t.$set(e.row,"Telephone","string"===typeof a?a.trim():a)},expression:"props.row.Telephone"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"delete_this_tr",on:{click:function(a){return a.stopPropagation(),t.deleteThisEditBoxTr(e.$index)}}},[t._v("删除")])]}}])}),a("el-table-column")],1),a("div",{staticClass:"addSubClinics"},[a("el-button",{staticClass:"btn120x40",attrs:{type:"primary",disabled:1===t.editBoxData.ClinicType&&1===t.editBoxData.SubClinics.length},on:{click:t.addEditBoxTr}},[t._v("新增子科室")])],1)],1),a("div",{staticClass:"editBoxOption"},[a("el-button",{on:{click:t.editBoxCancelSave}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.editBoxSave}},[t._v("完成")])],1)])])}),l=[],s={props:["data"],data:function(){return{forbit:!1,editBoxData:{}}},created:function(){this.editBoxData=this.$props.data,0!=this.editBoxData.Id&&(this.forbit=!0)},methods:{editBoxCancelSave:function(){this.$emit("to-father","")},editBoxSave:function(){var t=this,e="";if(e=0==this.editBoxData.Id?"post":"put",this.GLOBAL.VerificationHandle([{val:[this.editBoxData.Name,this.editBoxData.ClinicType],type:"StringAllNotEmpty",msg:["科室名称不能为空！","科室类型必选！"]},{val:this.editBoxData.SubClinics,type:"ArrayNotEmpty",msg:"您还没有添加子科室！请至少添加一个子科室！"}])){var a=[],i=[];this.editBoxData.SubClinics.forEach(function(t){a.push(t.Name),i.push("子科室名称不能为空！")}),this.GLOBAL.VerificationHandle([{val:a,type:"StringAllNotEmpty",msg:i}])&&axios({url:"/api/Clinic",method:e,data:this.editBoxData}).then(function(e){var a;200==e.data.Code?(a="success",t.$emit("to-father",e.data.Data)):a="error",t.showInformation({classify:"message",msg:e.data.Msg,type:a})}).catch(function(t){})}},deleteThisEditBoxTr:function(t){this.editBoxData.Id>0&&(this.editBoxData.DeletedSubClinics=[],this.editBoxData.DeletedSubClinics.push(this.editBoxData.SubClinics[t].Id)),this.editBoxData.SubClinics.splice(t,1)},addEditBoxTr:function(){this.editBoxData.SubClinics.push({Id:0,Name:"",ShortCode:"",Telephone:""})}}},c=s,r=(a("8300"),a("2877")),d=Object(r["a"])(c,o,l,!1,null,null,null),u=d.exports,h=a("1146"),p=a.n(h),f={data:function(){return{Type:0,basic_search:"",table_data:[],showEditBox:!1,toChildData:{}}},components:{ClinicBox:u},created:function(){var t=this;axios({url:"/api/Clinic"}).then(function(e){200==e.data.Code?t.table_data=e.data.Data:t.showInformation({classify:"message",msg:e.data.Msg})}).catch(function(t){})},mounted:function(){},methods:{fileChange:function(t){var e=this,a={},i=t.target.files[0],n=new FileReader;n.onload=function(t){var i=t.target.result,n=p.a.read(i,{type:"binary"});n.SheetNames.forEach(function(t){a[t]=p.a.utils.sheet_to_row_object_array(n.Sheets[t]).splice(1)});for(var o=function(t){a.Sheet1[t].SubClinics=a.SubClinics.filter(function(e){return e.ClinicId===a.Sheet1[t].Id})},l=0;l<a.Sheet1.length;l++)o(l);e.requestData(a.Sheet1,0)},n.onerror=function(t){this.showInformation({classify:"message",msg:"文件不能被读取！Code ".concat(t.target.error.code)})},n.readAsBinaryString(i)},requestData:function(t,e){var a=this;axios({url:"/api/Clinic",method:"POST",data:t[e]}).then(function(i){200==i.data.Code?(a.table_data=i.data.Data,e<t.length-1&&a.requestData(t,e+1)):a.showInformation({classify:"message",msg:i.data.Msg})}).catch(function(t){})},searchThisTableData:function(){},addTableTr:function(){this.toChildData={Id:0,Name:"",ShortCode:"",Telephone:"",ClinicType:"",SubClinics:[]},this.showEditBox=!0},deleteThisTr:function(t){var e=this;this.$confirm("您是否确定删除该项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){axios.delete("/api/Clinic/".concat(e.table_data[t].Id)).then(function(t){var a;200==t.data.Code?(a="success",e.table_data=t.data.Data):a="error",e.showInformation({classify:"message",msg:t.data.Msg,type:a})}).catch(function(t){})}).catch(function(){})},editThisTr:function(t){this.toChildData=JSON.parse(JSON.stringify(this.table_data[t])),this.showEditBox=!0},child2father:function(t){this.showEditBox=!1,t&&(this.table_data=t)}}},b=f,m=(a("34b2"),Object(r["a"])(b,i,n,!1,null,null,null));e["default"]=m.exports},8300:function(t,e,a){"use strict";var i=a("36e5"),n=a.n(i);n.a},e753:function(t,e,a){}}]);