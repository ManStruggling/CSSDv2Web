(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5511a3fa"],{"1a10":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"photoView"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"view_menu"},[t.$props.viewMode?t._e():a("h3",[a("p",{on:{click:t.switchToTakePhoto}})]),a("el-tabs",{attrs:{type:"card","tab-position":"left"},on:{"tab-click":t.tabClicked},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.list,function(e,s){return a("el-tab-pane",{key:s,attrs:{name:s+""}},[a("div",{staticClass:"imageListBox",attrs:{slot:"label"},slot:"label"},[a("img",{attrs:{src:e.Path||e.Base64String,alt:""}}),t.$props.viewMode?t._e():a("i",{staticClass:"deleteImg",on:{click:function(e){return e.stopPropagation(),t.deleteImg(s)}}})]),a("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.mode,expression:"mode==0"}],staticClass:"tab_content"},[a("img",{attrs:{src:e.Path||e.Base64String,alt:""}}),t.$props.viewMode?t._e():a("el-input",{attrs:{type:"textarea",placeholder:"备注",resize:"none"},model:{value:e.Remark,callback:function(a){t.$set(e,"Remark","string"===typeof a?a.trim():a)},expression:"item.Remark"}}),t.$props.viewMode?a("p",[t._v(t._s(e.Remark))]):t._e()],1)])],1)}),1)],1),a("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.mode,expression:"mode===1"}],staticClass:"view_content"},[a("img",{attrs:{src:t.image,alt:""}}),a("h5",[a("el-button",{staticClass:"btn120x40",on:{click:t.takePhoto}},[t._v("拍照")])],1)])]),a("i",{staticClass:"closePhotoView",on:{click:t.close}})],1)])},i=[],o={props:["data","viewMode","DeletedPicturesId"],data:function(){return{activeName:"-1",mode:0,image:"",list:[]}},created:function(){this.list=null==this.$props.data?[]:this.$props.data,this.list.length>0&&(this.activeName=0),this.$props.viewMode||this.switchToTakePhoto()},beforeDestroy:function(){CSManager.CloseVideo()},methods:{close:function(){this.$emit("viewPhoto-to-father",this.list)},switchToTakePhoto:function(){this.$props.viewMode||CSManager.OpenVideo(50,"",this),this.mode=1},takePhoto:function(){this.list.push({Id:0,Path:"",Base64String:this.image,Remark:""}),this.mode=0,this.activeName=this.list.length-1+""},deleteImg:function(t){var e=this;this.$confirm("您确定要删除该照片?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){0!=e.list[t].Id&&e.$props.DeletedPicturesId.push(e.list[t].Id),e.list.splice(t,1)}).catch(function(){})},tabClicked:function(){this.mode=0}}},c=o,n=(a("68c0"),a("2877")),r=Object(n["a"])(c,s,i,!1,null,null,null);e["a"]=r.exports},"68c0":function(t,e,a){"use strict";var s=a("c38f"),i=a.n(s);i.a},"6b4f":function(t,e,a){"use strict";var s=a("bd47"),i=a.n(s);i.a},bd47:function(t,e,a){},c38f:function(t,e,a){},cd20:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cssd_box",attrs:{id:"unqualifiedRecord"}},[a("div",{staticClass:"cssd_title"},[a("ul",{staticClass:"cssd_menu"},[a("router-link",{attrs:{to:"/apply/unqualifiedPackageRegistration",tag:"li"}},[a("p",[t._v("返回")])])],1),a("div",{staticClass:"cssd_title_right"},[a("p",{staticClass:"search_date"},[a("el-date-picker",{attrs:{type:"daterange",align:"right",clearable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.GLOBAL.pickerOptions,"value-format":"yyyy-MM-dd"},model:{value:t.search_date,callback:function(e){t.search_date=e},expression:"search_date"}})],1),a("p",[a("el-button",{attrs:{type:"primary"},on:{click:t.searchRecordsData}},[t._v("查询")])],1)])]),a("div",{staticClass:"cssd_table_center cssd_record_ui table_unExpand"},[t._m(0),a("el-collapse",{attrs:{accordion:""},on:{change:t.collapseChange}},t._l(t.recordList,function(e,s){return a("el-collapse-item",{key:s,attrs:{name:s+""}},[a("div",{staticClass:"collapseTh",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"collapseTd"},[a("p",[t._v(t._s(e.RegisterDate))])]),a("div",{staticClass:"collapseTd"},[a("p",[t._v(t._s(e.RegisterPerson))])]),a("div",{staticClass:"collapseTd"},[a("p",[a("el-button",{attrs:{size:"mini",disabled:!((t.GLOBAL.UserInfo.JobAndCompetence.includes("271")||t.GLOBAL.UserInfo.JobAndCompetence.includes("000")||t.GLOBAL.UserInfo.JobAndCompetence.includes("200"))&&!e.CanNotBeModified)},on:{click:function(e){return e.stopPropagation(),t.changeRecord(s)}}},[t._v("修改")])],1)])]),a("el-table",{attrs:{data:e.FailedPackages}},[a("el-table-column",{attrs:{label:"包条码",prop:"BarCode",width:"240"}}),a("el-table-column",{attrs:{label:"包名称",prop:"Name",width:"210"}}),a("el-table-column",{attrs:{label:"不合格原因",prop:"FailedPackageCauseString",width:"210"}}),a("el-table-column",{attrs:{label:"照片"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{on:{click:function(a){return t.handleShowPhotos(s,e.$index)}}},[t._v("查看")])]}}],null,!0)}),a("el-table-column")],1)],1)}),1),a("div",{directives:[{name:"show",rawName:"v-show",value:""==t.recordList,expression:"recordList==''"}],staticClass:"recordNoData"},[t._v("暂无数据")])],1),a("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[t.isShowPhoto?a("PhotoView",{attrs:{data:t.photoData,viewMode:!0},on:{"viewPhoto-to-father":t.viewPhotoToFather}}):t._e()],1)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content_title"},[a("p",[t._v("登记日期")]),a("p",[t._v("记录人")]),a("p",[t._v("操作")])])}],o=a("1a10"),c={data:function(){return{photoData:[],search_date:[],isShowPhoto:!1,endDateLimit:{},recordList:[]}},created:function(){var t=this.GLOBAL.GetNowDate();this.search_date=[t,t],this.searchRecordsData()},mounted:function(){},components:{PhotoView:o["a"]},methods:{handleShowPhotos:function(t,e){var a=this;axios({url:"/api/FailedPackage/Picture/".concat(this.recordList[t].FailedPackages[e].PackageBarCodeId)}).then(function(s){200==s.data.Code?(a.recordList[t].FailedPackages[e].FailedPackagePictures=s.data.Data,a.photoData=a.recordList[t].FailedPackages[e].FailedPackagePictures,a.isShowPhoto=!0):a.showInformation({classify:"message",msg:s.data.Msg})})},viewPhotoToFather:function(){this.isShowPhoto=!1},collapseChange:function(t){var e=this;""!=t&&""==this.recordList[t].FailedPackages&&axios({url:"/api/FailedPackage/FailedPackagesBy/".concat(this.recordList[t].Id)}).then(function(a){200==a.data.Code?e.recordList[t].FailedPackages=a.data.Data:e.showInformation({classify:"message",msg:a.data.Msg})})},changeRecord:function(t){this.$router.push({path:"/apply/unqualifiedPackageRegistration",query:{recordId:this.recordList[t].Id}})},searchRecordsData:function(){this.GLOBAL.searchRecord(this.search_date[0],this.search_date[1],this,"/odata/FailedPackageRecords","RegisterDate")}}},n=c,r=(a("6b4f"),a("2877")),l=Object(r["a"])(n,s,i,!1,null,null,null);e["default"]=l.exports}}]);