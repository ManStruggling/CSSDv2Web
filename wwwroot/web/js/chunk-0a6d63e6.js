(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a6d63e6"],{"7ee4":function(t,e,s){"use strict";var a=s("f727"),i=s.n(a);i.a},"983b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cssd_box",attrs:{id:"reserveCheck"}},[s("div",{staticClass:"cssd_title"},[s("ul",{staticClass:"cssd_menu"},[s("router-link",{attrs:{to:"/",tag:"li"}},[s("p",[t._v("返回")])]),s("router-link",{attrs:{to:"/provide/reserveCheckRecord",tag:"li"}},[s("p",[t._v("预定审核记录")])])],1),s("div",{staticClass:"cssd_title_right"},[s("p",[s("span",{directives:[{name:"show",rawName:"v-show",value:t.hasNewTask,expression:"hasNewTask"}]},[t._v("有新任务")]),s("i",{on:{click:t.refresh}})])])]),s("div",{staticClass:"cssd_table_center tabs_totalBar cssd_totalBar"},[s("el-tabs",{attrs:{type:"border-card","tab-position":"left"},model:{value:t.tabsActiveName,callback:function(e){t.tabsActiveName=e},expression:"tabsActiveName"}},t._l(t.subClinics,function(e,a){return s("el-tab-pane",{key:a,attrs:{name:a+""}},[s("div",{attrs:{slot:"label"},slot:"label"},[s("h3",[t._v(t._s(e.ClinicName))]),s("h4",[t._v(t._s(e.SubClinicName))])]),s("div",{staticClass:"tab_content"},[s("div",{staticClass:"container table_collapse"},[s("div",{staticClass:"content_title"},[s("p",{staticStyle:{width:"50px"}},[s("el-checkbox",{attrs:{indeterminate:e.IsIndeterminate},on:{change:t.handleCheckAllChange},model:{value:e.CheckAll,callback:function(s){t.$set(e,"CheckAll",s)},expression:"item.CheckAll"}})],1),s("p",[t._v("预定条码")]),s("p",[t._v("需用日期")]),s("p",[t._v("预定日期")]),s("p",[t._v("备注")]),s("p",[t._v("操作")])]),s("el-checkbox-group",{on:{change:t.handleCheckedChange},model:{value:e.CheckList,callback:function(s){t.$set(e,"CheckList",s)},expression:"item.CheckList"}},[s("el-collapse",{attrs:{accordion:""}},t._l(e.BookTasks,function(e,a){return s("el-collapse-item",{key:a,attrs:{name:a+""}},[s("div",{staticClass:"collapseTh",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"collapseTd",staticStyle:{width:"90px"}},[s("div",{staticClass:"checkDiv"},[s("el-checkbox",{attrs:{label:e}},[t._v(t._s(""))])],1)]),s("div",{staticClass:"collapseTd"},[s("p",[t._v(t._s(e.BarCode))])]),s("div",{staticClass:"collapseTd"},[s("p",[t._v(t._s(e.BookDate))])]),s("div",{staticClass:"collapseTd"},[s("p",[t._v(t._s(e.CreatedDate))])]),s("div",{staticClass:"collapseTd"},[s("el-popover",{attrs:{placement:"top-start",title:"备注",width:"200",trigger:"hover",content:e.Remark}},[s("p",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.Remark))])])],1),s("div",{staticClass:"collapseTd"},[s("p",[s("a",{on:{click:function(s){return s.stopPropagation(),t.editBookTask(e.BookTaskId)}}},[t._v("编辑")])])])]),s("el-tabs",{attrs:{type:"card"}},[""!=e.Products?s("el-tab-pane",{attrs:{label:"无菌物品"}},[s("div",{staticClass:"table_detail"},[s("div",{staticClass:"myTableTitle"},[s("p",[t._v("名称")]),s("p",[t._v("数量")])]),s("ul",t._l(e.Products,function(e,a){return s("li",{key:a},[s("p",[t._v(t._s(e.Name))]),s("p",[t._v(t._s(e.Quantity))])])}),0)])]):t._e(),""!=e.DisposableItems?s("el-tab-pane",{attrs:{label:"一次性物品"}},[s("div",{staticClass:"table_detail"},[s("div",{staticClass:"myTableTitle"},[s("p",[t._v("名称")]),s("p",[t._v("规格")]),s("p",[t._v("数量")])]),s("ul",t._l(e.DisposableItems,function(e,a){return s("li",{key:a},[s("p",[t._v(t._s(e.Name))]),s("p",[t._v(t._s(e.Specification))]),s("p",[t._v(t._s(e.Quantity))])])}),0)])]):t._e()],1)],1)}),1)],1)],1)])])}),1),s("div",{staticClass:"cssd_table_bottom"},[s("p"),s("p",[s("el-button",{on:{click:t.submitNotPass}},[t._v("审核不通过")]),s("el-button",{attrs:{type:"primary"},on:{click:t.submitComplete}},[t._v("审核通过")])],1)])],1)])},i=[],n=(s("a481"),s("ac6a"),{data:function(){return{hasNewTask:!1,tabsActiveName:"0",subClinics:[],checkList:[],checkAll:!1,isIndeterminate:!1}},created:function(){var t=this;axios({url:"/api/Book/BookReview"}).then(function(e){200==e.data.Code?(e.data.Data.SubClinics.forEach(function(t){t.CheckList=[],t.CheckAll=!1,t.IsIndeterminate=!1}),t.subClinics=e.data.Data.SubClinics):t.showInformation({classify:"message",msg:e.data.Msg})}).catch(function(t){})},mounted:function(){this.GLOBAL.initWebSorcket(this,"ReserveCheckState")},methods:{refresh:function(){this.$router.go(0)},editBookTask:function(t){this.$router.replace({path:"/provice/reserveChange",query:{recordId:t}})},submitNotPass:function(){var t=this,e=[];this.subClinics.forEach(function(t){e=e.concat(t.CheckList)}),this.GLOBAL.VerificationHandle([{val:e.length,type:"NumberNotZero",msg:"请至少选择一个审核任务！"}])&&axios({url:"/api/Book/BookReview/Failed",method:"POST",data:{BookTasks:e}}).then(function(e){200==e.data.Code&&("success",t.websocket.send(JSON.stringify({CssdId:t.GLOBAL.UserInfo.ClinicId,ReserveCheckState:!0,PackageState:!1,ProvideState:!1})),t.$router.go(0)),t.showInformation({classify:"message",msg:e.data.Msg})}).catch(function(t){})},submitComplete:function(){var t=this,e=[];this.subClinics.forEach(function(t){e=e.concat(t.CheckList)}),this.GLOBAL.VerificationHandle([{val:e.length,type:"NumberNotZero",msg:"请至少选择一个审核任务！"}])&&axios({url:"/api/Book/BookReview/Success",method:"POST",data:{BookTasks:e}}).then(function(e){var s;200==e.data.Code?(s="success",0===t.GLOBAL.UserInfo.CssdProvideType?t.websocket.send(JSON.stringify({CssdId:t.GLOBAL.UserInfo.ClinicId,ReserveCheckState:!0,PackageState:!1,ProvideState:!1})):1===t.GLOBAL.UserInfo.CssdProvideType&&t.websocket.send(JSON.stringify({CssdId:t.GLOBAL.UserInfo.ClinicId,ReserveCheckState:!0,PackageState:!1,ProvideState:!0})),e.data.Data.forEach(function(t){CSManager.PrintBarcode(JSON.stringify(t))}),t.$router.go(0)):s="error",t.showInformation({classify:"message",msg:e.data.Msg,type:s})}).catch(function(t){})},handleCheckAllChange:function(t){var e=this;t?(this.subClinics[this.tabsActiveName].CheckList=[],this.subClinics[this.tabsActiveName].BookTasks.forEach(function(t){e.subClinics[e.tabsActiveName].CheckList.push(t)})):this.subClinics[this.tabsActiveName].CheckList=[],this.subClinics[this.tabsActiveName].IsIndeterminate=!1},handleCheckedChange:function(t){var e=t.length;this.subClinics[this.tabsActiveName].CheckAll=e===this.subClinics[this.tabsActiveName].BookTasks.length,this.subClinics[this.tabsActiveName].IsIndeterminate=e>0&&e<this.subClinics[this.tabsActiveName].BookTasks.length}}}),c=n,r=(s("7ee4"),s("2877")),o=Object(r["a"])(c,a,i,!1,null,null,null);e["default"]=o.exports},a481:function(t,e,s){"use strict";var a=s("cb7c"),i=s("4bf8"),n=s("9def"),c=s("4588"),r=s("0390"),o=s("5f1b"),l=Math.max,d=Math.min,u=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,v=/\$([$&`']|\d\d?)/g,f=function(t){return void 0===t?t:String(t)};s("214f")("replace",2,function(t,e,s,p){return[function(a,i){var n=t(this),c=void 0==a?void 0:a[e];return void 0!==c?c.call(a,n,i):s.call(String(n),a,i)},function(t,e){var i=p(s,t,this,e);if(i.done)return i.value;var u=a(t),h=String(this),v="function"===typeof e;v||(e=String(e));var k=u.global;if(k){var b=u.unicode;u.lastIndex=0}var m=[];while(1){var g=o(u,h);if(null===g)break;if(m.push(g),!k)break;var _=String(g[0]);""===_&&(u.lastIndex=r(h,n(u.lastIndex),b))}for(var L="",S=0,T=0;T<m.length;T++){g=m[T];for(var y=String(g[0]),A=l(d(c(g.index),h.length),0),N=[],I=1;I<g.length;I++)N.push(f(g[I]));var B=g.groups;if(v){var w=[y].concat(N,A,h);void 0!==B&&w.push(B);var x=String(e.apply(void 0,w))}else x=C(y,h,A,N,B,e);A>=S&&(L+=h.slice(S,A)+x,S=A+y.length)}return L+h.slice(S)}];function C(t,e,a,n,c,r){var o=a+t.length,l=n.length,d=v;return void 0!==c&&(c=i(c),d=h),s.call(r,d,function(s,i){var r;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,a);case"'":return e.slice(o);case"<":r=c[i.slice(1,-1)];break;default:var d=+i;if(0===d)return s;if(d>l){var h=u(d/10);return 0===h?s:h<=l?void 0===n[h-1]?i.charAt(1):n[h-1]+i.charAt(1):s}r=n[d-1]}return void 0===r?"":r})}})},ac6a:function(t,e,s){for(var a=s("cadf"),i=s("0d58"),n=s("2aba"),c=s("7726"),r=s("32e9"),o=s("84f2"),l=s("2b4c"),d=l("iterator"),u=l("toStringTag"),h=o.Array,v={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=i(v),p=0;p<f.length;p++){var C,k=f[p],b=v[k],m=c[k],g=m&&m.prototype;if(g&&(g[d]||r(g,d,h),g[u]||r(g,u,k),o[k]=h,b))for(C in a)g[C]||n(g,C,a[C],!0)}},f727:function(t,e,s){}}]);