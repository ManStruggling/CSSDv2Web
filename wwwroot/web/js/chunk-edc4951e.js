(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-edc4951e"],{"1fba":function(t,e,a){},4608:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"basic_main"},[a("div",{staticClass:"basic_main_head"},[a("p"),a("el-button",{staticClass:"basic_ipt_add",attrs:{type:"primary"},on:{click:t.addTableTr}},[t._v("新增生产商")])],1),a("div",{staticClass:"basic_table table_unExpand"},[a("el-table",{attrs:{data:t.table_data}},[a("el-table-column",{attrs:{label:"生产商名称",prop:"Name",width:"240"}}),a("el-table-column",{attrs:{label:"传真",prop:"FaxNumber",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(""==e.row.FaxNumber?"-":e.row.FaxNumber)+"\n        ")]}}])}),a("el-table-column",{attrs:{label:"公司电话",prop:"PhoneNumber",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(""==e.row.PhoneNumber?"-":e.row.PhoneNumber)+"\n        ")]}}])}),a("el-table-column",{attrs:{label:"联络人",prop:"ContactPerson",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(""==e.row.ContactPerson?"-":e.row.ContactPerson)+"\n        ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"change_this_tr",on:{click:function(a){return a.stopPropagation(),t.editThisTr(e.$index)}}},[t._v("编辑")]),a("a",{staticClass:"delete_this_tr",on:{click:function(a){return a.stopPropagation(),t.deleteThisTr(e.$index)}}},[t._v("删除")])]}}])}),a("el-table-column")],1)],1),a("transition",{attrs:{name:"fade","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[t.showEditBox?a("ProducerBox",{attrs:{data:t.toChildData},on:{"to-father":t.child2father}}):t._e()],1)],1)},o=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"producerBox",attrs:{id:"editBox"}},[a("div",{staticClass:"editContainer"},[a("div",{staticClass:"editContent"},[a("ul",{staticClass:"clear_float"},[a("li",[a("p",[t._v("生产商名称")]),a("el-input",{attrs:{type:"text",placeholder:"生产商名称(必填)",maxlength:"10"},model:{value:t.editBoxData.Name,callback:function(e){t.$set(t.editBoxData,"Name","string"===typeof e?e.trim():e)},expression:"editBoxData.Name"}})],1),a("li",[a("p",[t._v("传真")]),a("el-input",{attrs:{type:"text",placeholder:"传真"},model:{value:t.editBoxData.FaxNumber,callback:function(e){t.$set(t.editBoxData,"FaxNumber","string"===typeof e?e.trim():e)},expression:"editBoxData.FaxNumber"}})],1),a("li",[a("p",[t._v("公司电话")]),a("el-input",{attrs:{type:"text",placeholder:"单位电话"},model:{value:t.editBoxData.PhoneNumber,callback:function(e){t.$set(t.editBoxData,"PhoneNumber","string"===typeof e?e.trim():e)},expression:"editBoxData.PhoneNumber"}})],1),a("li",[a("p",[t._v("联系人")]),a("el-input",{attrs:{type:"text",placeholder:"联系人"},model:{value:t.editBoxData.ContactPerson,callback:function(e){t.$set(t.editBoxData,"ContactPerson","string"===typeof e?e.trim():e)},expression:"editBoxData.ContactPerson"}})],1),a("li",[a("p",[t._v("联系人号码")]),a("el-input",{attrs:{type:"text",placeholder:"联系人号码"},model:{value:t.editBoxData.ContactNumber,callback:function(e){t.$set(t.editBoxData,"ContactNumber","string"===typeof e?e.trim():e)},expression:"editBoxData.ContactNumber"}})],1),a("li",[a("p",[t._v("生产商地址")]),a("el-input",{attrs:{type:"text",placeholder:"生产商地址"},model:{value:t.editBoxData.Address,callback:function(e){t.$set(t.editBoxData,"Address","string"===typeof e?e.trim():e)},expression:"editBoxData.Address"}})],1),a("li",{staticClass:"textareaBox"},[a("p",[t._v("备注")]),a("el-input",{attrs:{type:"textarea",maxlength:"20",placeholder:"备注","show-word-limit":""},model:{value:t.editBoxData.Remark,callback:function(e){t.$set(t.editBoxData,"Remark","string"===typeof e?e.trim():e)},expression:"editBoxData.Remark"}})],1)]),0==t.editBoxData.Type?a("div",{staticClass:"RelationBox table_collapse table_unExpand"},[t._m(0),a("el-collapse",{attrs:{accordion:""},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.editBoxData.DeviceModel,function(e,i){return a("el-collapse-item",{key:i,attrs:{name:i+""}},[a("div",{staticClass:"collapseTh",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"collapseTd"},[a("p",[a("el-input",{attrs:{placeholder:"型号名称(必填)",maxlength:"10"},nativeOn:{click:function(e){return e.stopPropagation(),t.GLOBAL.cancelBubble(e)}},model:{value:e.Name,callback:function(a){t.$set(e,"Name","string"===typeof a?a.trim():a)},expression:"item.Name"}})],1)]),a("div",{staticClass:"collapseTd"},[a("p",[a("a",{staticClass:"delete_this_tr",on:{click:function(e){return e.stopPropagation(),t.deleteThisEditBoxTr(i)}}},[t._v("删除")])])])]),a("el-table",{attrs:{data:e.DevicePrograms}},[a("el-table-column",{attrs:{label:"程序名称",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{type:"text",placeholder:"程序名称(必填)",maxlength:"10"},model:{value:e.row.Name,callback:function(a){t.$set(e.row,"Name","string"===typeof a?a.trim():a)},expression:"props.row.Name"}})]}}],null,!0)}),a("el-table-column",{attrs:{label:"程序运作时长（分钟）",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{min:1,max:300,controls:!1},on:{change:function(a,o){t.numberChange(a,o,i,e.$index)}},model:{value:e.row.Duration,callback:function(a){t.$set(e.row,"Duration",a)},expression:"props.row.Duration"}})]}}],null,!0)}),a("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"deleteThisProg",on:{click:function(a){return t.editBoxDeleteThisProgm(i,e.$index)}}},[t._v("删除")])]}}],null,!0)}),a("el-table-column")],1),a("div",{staticClass:"addThisProg"},[a("el-button",{staticClass:"btn88x32",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.editBoxAddProgm(i)}}},[t._v("新增程序")]),a("div",{staticStyle:{height:"10px"}})],1)],1)}),1),a("div",{staticClass:"addDeviceModel"},[a("el-button",{staticClass:"btn120x40",attrs:{type:"primary"},on:{click:t.addEditBoxTr}},[t._v("新增设备型号")])],1)],1):t._e()]),a("div",{staticClass:"editBoxOption"},[a("el-button",{on:{click:t.editBoxCancelSave}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.editBoxSave}},[t._v("完成")])],1)])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content_title"},[a("p",[t._v("设备型号")]),a("p",[t._v("操作")])])}],r=(a("ac6a"),{props:["data"],data:function(){return{activeName:"0",editBoxData:{}}},created:function(){this.editBoxData=this.$props.data},methods:{numberChange:function(t,e,a,i){var o=this;void 0==t&&setTimeout(function(){o.editBoxData.DeviceModel[a].DevicePrograms[i].Duration=1},0)},editBoxCancelSave:function(){this.$emit("to-father","")},editBoxSave:function(){var t=this,e="";if(e=0==this.editBoxData.Id?"post":"put",this.GLOBAL.VerificationHandle([{val:this.editBoxData.Name,type:"StringNotEmpty",msg:"生产商名称不能为空！"},{val:this.editBoxData.DeviceModel,type:"ArrayNotEmpty",msg:"您还没有添加设备型号！请至少添加一个设备型号！"}])){var a=[],i=[],o=[],n=[];if(this.editBoxData.DeviceModel.forEach(function(t){a.push(t.Name),i.push("设备型号名称不能为空！"),o.push(t.DevicePrograms),n.push("您还没有为添加的设备型号添加程序！请至少添加一个设备型号程序！")}),this.GLOBAL.VerificationHandle([{val:a,type:"StringAllNotEmpty",msg:i},{val:o,type:"ArrayAllNotEmpty",msg:n}])){for(var s=[],r=[],l=0;l<this.editBoxData.DeviceModel.length;l++)for(var c=0;c<this.editBoxData.DeviceModel[l].DevicePrograms.length;c++)s.push(this.editBoxData.DeviceModel[l].DevicePrograms[c].Name),r.push("设备型号的程序名称不能为空！");this.GLOBAL.VerificationHandle([{val:s,type:"StringAllNotEmpty",msg:r}])&&axios({url:"/api/Manufacturer",method:e,data:this.editBoxData}).then(function(e){var a;200==e.data.Code?(a="success",t.$emit("to-father",e.data.Data)):a="error",t.showInformation({classify:"message",msg:e.data.Msg,type:a})}).catch(function(t){})}}},editBoxAddProgm:function(t){this.editBoxData.DeviceModel[t].DevicePrograms.push({Name:"",Duration:0})},editBoxDeleteThisProgm:function(t,e){if(this.editBoxData.Id>0){var a=[];a.push(this.editBoxData.DeviceModel[t].DevicePrograms[e].Id),this.editBoxData.DeletedDevicePrograms=a}this.editBoxData.DeviceModel[t].DevicePrograms.splice(e,1)},deleteThisEditBoxTr:function(t){if(this.editBoxData.Id>0){var e=[];e.push(this.editBoxData.DeviceModel[t].Id),this.editBoxData.DeletedDeviceModels=e}this.editBoxData.DeviceModel.splice(t,1)},addEditBoxTr:function(){this.editBoxData.DeviceModel.push({Name:"",DevicePrograms:[]})}}}),l=r,c=(a("c753"),a("2877")),d=Object(c["a"])(l,n,s,!1,null,null,null),u=d.exports,m={data:function(){return{Type:0,basic_search:"",table_data:[{DeviceModel:[{ManufacturerId:3,DevicePrograms:[{DeviceModelId:3,Id:3,Name:"程序1",Duration:20},{DeviceModelId:3,Id:4,Name:"程序2",Duration:30},{DeviceModelId:3,Id:5,Name:"程序3",Duration:40},{DeviceModelId:3,Id:6,Name:"程序4",Duration:50}],Id:3,Name:"设备型号1"},{ManufacturerId:3,DevicePrograms:[{DeviceModelId:4,Id:7,Name:"程序1",Duration:10},{DeviceModelId:4,Id:8,Name:"程序2",Duration:20},{DeviceModelId:4,Id:9,Name:"程序3",Duration:30},{DeviceModelId:4,Id:13,Name:"程序4",Duration:1},{DeviceModelId:4,Id:14,Name:"程序5",Duration:1},{DeviceModelId:4,Id:15,Name:"程序6",Duration:1},{DeviceModelId:4,Id:16,Name:"程序7",Duration:1},{DeviceModelId:4,Id:17,Name:"程序3",Duration:1}],Id:4,Name:"设备型号2"}],Id:3,Name:"生产商1",FaxNumber:"",PhoneNumber:"",ContactPerson:"",ContactNumber:"",Address:"",Type:0,Remark:""},{DeviceModel:[{ManufacturerId:4,DevicePrograms:[{DeviceModelId:5,Id:10,Name:"程序1",Duration:15},{DeviceModelId:5,Id:11,Name:"程序2",Duration:25},{DeviceModelId:5,Id:12,Name:"程序3",Duration:35}],Id:5,Name:"设备型号3"}],Id:4,Name:"生产商2",FaxNumber:"",PhoneNumber:"",ContactPerson:"",ContactNumber:"",Address:"",Type:0,Remark:""}],showEditBox:!1,toChildData:{}}},components:{ProducerBox:u},created:function(){},watch:{$route:{handler:function(t,e,a){var i=this;this.Type=t.params.Type-0,axios("/api/Manufacturer/ByType/"+this.Type).then(function(t){200==t.data.Code?i.table_data=t.data.Data:i.showInformation({classify:"message",msg:t.data.Msg})}).catch(function(t){})},immediate:!0}},mounted:function(){},methods:{searchThisTableData:function(){},addTableTr:function(){this.toChildData={Id:0,Name:"",FaxNumber:"",PhoneNumber:"",ContactPerson:"",ContactNumber:"",Address:"",Remark:"",Type:this.Type,DeviceModel:[]},0!=this.Type&&delete this.toChildData.DeviceModel,this.showEditBox=!0},deleteThisTr:function(t){var e=this;this.$confirm("您是否确定删除该项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){axios.delete("/api/Manufacturer/".concat(e.Type,"/").concat(e.table_data[t].Id)).then(function(t){var a;200==t.data.Code?(a="success",e.table_data=t.data.Data):a="error",e.showInformation({classify:"message",msg:t.data.Msg,type:a})}).catch(function(t){})}).catch(function(){})},editThisTr:function(t){this.toChildData=JSON.parse(JSON.stringify(this.table_data[t])),this.showEditBox=!0},child2father:function(t){this.showEditBox=!1,t&&(this.table_data=t)}}},p=m,h=(a("f872"),Object(c["a"])(p,i,o,!1,null,null,null));e["default"]=h.exports},"486f":function(t,e,a){},ac6a:function(t,e,a){for(var i=a("cadf"),o=a("0d58"),n=a("2aba"),s=a("7726"),r=a("32e9"),l=a("84f2"),c=a("2b4c"),d=c("iterator"),u=c("toStringTag"),m=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=o(p),f=0;f<h.length;f++){var v,D=h[f],x=p[D],b=s[D],B=b&&b.prototype;if(B&&(B[d]||r(B,d,m),B[u]||r(B,u,D),l[D]=m,x))for(v in i)B[v]||n(B,v,i[v],!0)}},c753:function(t,e,a){"use strict";var i=a("486f"),o=a.n(i);o.a},f872:function(t,e,a){"use strict";var i=a("1fba"),o=a.n(i);o.a}}]);